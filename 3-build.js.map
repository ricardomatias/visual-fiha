{"version":3,"sources":["webpack:///./mapping/data.js","webpack:///./controller/settings.js","webpack:///./midi/state.js","webpack:///./signal/control-view.js","webpack:///./layer/details-view.js","webpack:///./signal/hsla/control-view.js","webpack:///./midi/view.js","webpack:///./signal/beat/control-view.js","webpack:///./signal/rgba/control-view.js","webpack:///./storage.js","webpack:///./web-worker.js","webpack:///./controller/view.js","webpack:///./signal/collection.js","webpack:///./controller/control-view.js","webpack:///./layer/control-view.js","webpack:///./object-path.js","webpack:///./signal/state.js","webpack:///./resolve.js","webpack:///./controller/details-view.js","webpack:///./controller/ace-view.js","webpack:///./controller/audio-monitor-view.js","webpack:///./controller/audio-source-view.js","webpack:///./controller/control-screen-controls-view.js","webpack:///./controller/gist-view.js","webpack:///./controller/localforage-view.js","webpack:///./controller/property-view.js","webpack:///./controller/region-view.js","webpack:///./controller/suggestion-view.js","webpack:///./layer/canvas/canvas-completer.js","webpack:///./layer/canvas/control-view.js","webpack:///./layer/img/control-view.js","webpack:///./layer/layers-view.js","webpack:///./layer/svg/control-view.js","webpack:///./layer/svg/details-view.js","webpack:///./layer/txt/control-view.js","webpack:///./layer/video/control-view.js","webpack:///./mapping/control-view.js","webpack:///./midi/devices/akai/lpd8.js","webpack:///./midi/devices/korg/kp3.js","webpack:///./midi/devices/korg/nk2.js","webpack:///./midi/devices/novation/lpm.js","webpack:///./signal/beat/state.js","webpack:///./signal/details-view.js","webpack:///./signal/hsla/state.js","webpack:///./signal/rgba/state.js","webpack:///./signal/signals-view.js"],"names":[],"mappings":";;;;;;AAAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,YAAY;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,+DAA+D;AAC/D,KAAK;;AAEL;AACA;AACA;;AAEA,IAAI;AACJ;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,IAAI;AACL;AACA,cAAc;AACd;AACA;AACA,8BAA8B,YAAY;AAC1C;AACA;AACA;;AAEA;AACA;;AAEA;AACA,yCAAyC,WAAW,EAAE;AACtD;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;;AAGH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;;AAGH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,0B;;;;;;;;ACpOA;AACA;;AAEA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA,wBAAwB;AACxB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,0B;;;;;;;;AChCA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;AAID;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,MAAM;AACN;;AAEA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,oCAAoC;AACpC;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;;;;;;;ACzKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA,mC;;;;;;;;ACvEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,YAAY;AACZ,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK,qCAAqC,mBAAmB,EAAE;AAC/D,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;;;AAID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA,kC;;;;;;;;AClOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD,uC;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,gC;;;;;;;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,qBAAqB;AACrB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH,mBAAmB;AACnB;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,CAAC;AACD,uC;;;;;;;;ACrGA;AACA;AACA;;AAEA,0FAA0F;;AAE1F,uC;;;;;;;ACNA;;AAEA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,6B;;;;;;;ACXA;AACA;AACA,E;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;;AAGL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,iEAAiE;AAC9E,aAAa,qDAAqD;AAClE,aAAa,0DAA0D;AACvE,aAAa;AACb;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA,YAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA,aAAa,kEAAkE;AAC/E,aAAa,uDAAuD;AACpE,gBAAgB;AAChB;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,wCAAwC,gCAAgC;AACxE;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,iCAAiC,gCAAgC;AACjE;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;;;AAIH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,0BAA0B;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;;AAEA;AACA,cAAc,iBAAiB;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gC;;;;;;;;ACjjBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;;;;;;;;;AC9BA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA,6BAA6B,MAAM;AACnC,6BAA6B,aAAa;AAC1C;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;;AAED,6B;;;;;;;;ACvJA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mCAAmC;AAC/D;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,kCAAkC,iBAAiB;AACnD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA,kC;;;;;;;;ACzHA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,4B;;;;;;;;AC7DA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,6CAA6C,UAAU,EAAE;AACzD;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;;;;;;;;;AC1CA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yB;;;;;;;;ACzBA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAW;AACtC,WAAW;AACX;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;ACvHA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,GAAG;;AAEH,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,aAAa;AAC1C,+BAA+B,aAAa;AAC5C;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B,aAAa;AAC5C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;AACD,2B;;;;;;;;ACvOA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;AClKD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;AACD,6B;;;;;;;;ACvHA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,cAAc,yDAAyD;AACvE,eAAe;AACf,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;AACD,uC;;;;;;;;ACjDA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,8DAA8D,kDAAkD;;AAEhH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,2CAA2C;AAC3C,yCAAyC;AACzC,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,CAAC;AACD;;;;;;;;;ACjJA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL,GAAG;AACH;AACA,8DAA8D,yDAAyD;AACvH;AACA;AACA;AACA,aAAa;AACb;AACA,GAAG;AACH;AACA,8DAA8D,yDAAyD;AACvH;AACA;AACA;AACA,aAAa;AACb;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD,iC;;;;;;;;AClFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,YAAY;AACZ,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,MAAM;;AAEN;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK,qCAAqC,mBAAmB,EAAE;AAC/D,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;;;AAID;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;AAUD;;AAEA,gEAAgE;;AAEhE;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,8B;;;;;;;;AC7VA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,qCAAqC;AAC1D,qBAAqB;AACrB,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,6BAA6B;AAChD;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;;AAEA,4EAA4E;;AAE5E;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,0DAA0D;AAC1D,8CAA8C;AAC9C;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED,4B;;;;;;;;AC3IA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,qBAAqB,qCAAqC;AAC1D,gBAAgB;AAChB,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,+CAA+C,+BAA+B,eAAe,EAAE;AAC/F;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA,gDAAgD,SAAS,QAAQ,EAAE;AACnE;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA,iEAAiE,mBAAmB,EAAE;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,2DAA2D,aAAa;AACxE;;AAEA;AACA,6DAA6D,QAAQ;AACrE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA,GAAG;;AAEH;AACA,uBAAuB,uDAAuD;;AAE9E,6DAA6D,aAAa;;AAE1E;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,QAAQ;AACvC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,CAAC;AACD,gC;;;;;;;;AChYA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,eAAe;AAC5B;AACA;;AAEA;AACA,aAAa,eAAe;AAC5B;AACA,eAAe,eAAe;AAC9B;AACA,uBAAuB;AACvB,OAAO;AACP;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B,2BAA2B;AACvD;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;;;;;;;;AC3EA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,uEAAuE,iBAAiB,EAAE,sBAAsB,UAAU,EAAE;;AAE5H;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oCAAoC,mCAAmC;AACvE;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,E;;;;;;;;AC/KD;;AAEA;AACA;AACA,CAAC,E;;;;;;;;ACJD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,4B;;;;;;;;AC9EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA,4CAA4C,WAAW,EAAE;AACzD,GAAG;;AAEH;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,mBAAmB,WAAW,EAAE,MAAM,0BAA0B,6BAA6B,eAAe,GAAG;AAC/G,KAAK;;;AAGL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,wBAAwB,EAAE,IAAI,IAAI,EAAE,IAAI;AACxC;AACA;AACA,gCAAgC,sBAAsB;AACtD;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA,CAAC,E;;;;;;;;AC5ED;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,CAAC;;AAED,gC;;;;;;;;AC3BA;AACA;AACA;AACA,CAAC;AACD,qC;;;;;;;;ACJA;;AAEA;AACA;AACA,CAAC,E;;;;;;;;ACJD;AACA;AACA;AACA;AACA;;AAEA,yBAAyB,YAAY;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qDAAqD;AACrD,qDAAqD;AACrD,oDAAoD;AACpD,4DAA4D;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;;AAEL;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qDAAqD;AACrD,oDAAoD;AACpD,4DAA4D;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;;AAEL;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,yCAAyC,qEAAqE,+BAA+B;AAC7I;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,gDAAgD,yBAAyB;AACzE,GAAG;;AAEH;AACA;AACA;AACA,uEAAuE,iBAAiB,EAAE;AAC1F;AACA,gDAAgD,oBAAoB;AACpE,GAAG;;AAEH;AACA;AACA;AACA,yCAAyC,qEAAqE,+BAA+B;;AAE7I;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,YAAY,EAAE;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,qC;;;;;;;;ACjYA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,WAAW;;AAEhC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACtEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qBAAqB,WAAW;;AAEhC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC7KA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,WAAW;;AAEhC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC9GA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,WAAW;;AAEhC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AC/HA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,2B;;;;;;;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH,CAAC;AACD,mC;;;;;;;;ACjBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,CAAC;;AAED,iC;;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,CAAC;AACD,iC;;;;;;;;AClDA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,6B","file":"3-build.js","sourcesContent":["'use strict';\n\nvar resolve = require('./../resolve');\nvar assign = require('lodash.assign');\nvar State = require('ampersand-state');\nvar Collection = require('ampersand-collection');\n\nfunction cleanFnFromExport(item) {\n  item.transformFunction = item.transformFunction || item.fn.toString();\n  delete item.fn;\n  return item;\n}\n\nfunction compileTransformFunction(fn) {\n  fn = fn || function(val) { return val; };\n  var compiled;\n\n  // proxy the ramda functions\n  var ramdaMethods = '';\n  var ramda = require('ramda');\n  Object.keys(ramda)\n    .filter(function(name) {\n      return name.length > 1 && typeof ramda[name] === 'function';\n    })\n    .forEach(function(name) {\n      ramdaMethods += '\\nvar ' + name + ' = ramda.' + name + ';';\n    });\n\n  var str = `compiled = (function() {\n  // override some stuff that should not be used\n  var navigator, window, global, document, module, exports;\n\n  ${ ramdaMethods }\n  return function(val, oldVal) {\n    var result;\n    try {\n      result = (${ fn.toString() })(val, oldVal);\n    }\n    catch(e) {\n      result = e;\n    }\n    return result;\n  };\n})();`;\n  try {\n    eval(str);// jshint ignore:line\n  }\n  catch (e) {\n    compiled = function(val) { return val; };\n  }\n  return compiled;\n}\n\nvar MappingEmitter = State.extend({\n  idAttribute: 'name',\n\n  props: {\n    targets: ['array', true, function() { return []; }],\n    transformFunction: 'any',\n    source: ['string', false, ''],\n    name: ['string', true, null]\n  },\n\n  derived: {\n    fn: {\n      deps: ['transformFunction'],\n      fn: function() {\n        return compileTransformFunction(this.transformFunction);\n      }\n    },\n    sourceState: {\n      deps: ['source'],\n      fn: function() {\n        if (this.source.indexOf('midi:') === 0) return;\n        var sourcePath = this.source.split('.');\n        sourcePath.pop();\n        sourcePath = sourcePath.join('.');\n        return this.collection.resolve(sourcePath);\n      }\n    },\n    sourceProperty: {\n      deps: ['source'],\n      fn: function() {\n        if (this.source.indexOf('midi:') === 0) return;\n        var sourcePath = this.source.split('.');\n        return sourcePath.pop();\n      }\n    }\n  },\n});\n\nvar Mappings = Collection.extend({\n  model: MappingEmitter,\n\n  initialize: function(models, options) {\n    if (!options.context) throw new Error('Missing context option for Mappings');\n    var readonly;\n    if (typeof options.readonly === 'undefined') {\n      readonly = this.readonly = typeof DedicatedWorkerGlobalScope === 'undefined';\n    }\n    else {\n      readonly = this.readonly = options.readonly;\n    }\n\n    this.on('reset', function(collection, info) {\n      this.unbindMappings(info.previousModels).bindMappings(collection.models);\n    });\n    this.on('remove', function(model) {\n      this.unbindMappings([model]);\n    });\n    this.on('add', function(model) {\n      this.bindMappings([model]);\n    });\n\n    this.context = options.context;\n  },\n\n\n  bindMappings: function(mappings) {\n    if (this.readonly) return this;\n\n    (mappings || []).forEach(function(mapping) {\n      if (!mapping.sourceState) return;\n      this.listenTo(mapping.sourceState, 'all', function(evtName, source, value) {\n        if (evtName !== 'change:' + mapping.sourceProperty) return;\n        this.process([mapping], value);\n      });\n    }, this);\n\n    return this;\n  },\n\n  unbindMappings: function(mappings) {\n    if (this.readonly) return this;\n\n    (mappings || []).forEach(function(mapping) {\n      if (!mapping.sourceState) return;\n      this.stopListening(mapping.sourceState, 'all');\n    }, this);\n\n    return this;\n  },\n\n\n  findMappingsBySource: function(path) {\n    return this.models.filter(function(mapping) {\n      return mapping.source === path;\n    });\n  },\n\n  findMappingByTarget: function(path) {\n    return this.models.find(function(mapping) {\n      return mapping.targets.indexOf(path) > -1;\n    });\n  },\n\n  import: function(data, reset) {\n    if (reset) {\n      this.reset(data);\n    }\n    else {\n      this.set(data);\n    }\n    return this;\n  },\n\n  serialize: function() {\n    return Collection.prototype\n            .serialize.apply(this, arguments)\n            .map(cleanFnFromExport);\n  },\n\n  toJSON: function () {\n    return this.map(function (model) {\n      if (model.toJSON) {\n        return model.toJSON();\n      }\n      else {\n        var out = {};\n        assign(out, model);\n        delete out.collection;\n        return out;\n      }\n    })\n    .map(cleanFnFromExport);\n  },\n\n  export: function() {\n    return this.serialize();\n  },\n\n  resolve: function(path) {\n    return resolve(path, this.context);\n  },\n\n  process: function(sources, value) {\n    sources.forEach(function(info) {\n      info.targets.forEach(function(target) {\n        var parts = target.split('.');\n        var targetProperty = parts.pop();\n        var targetStatePath = parts.join('.');\n        var state;\n        try {\n          state = this.resolve(targetStatePath);\n        } catch(e) {}\n        if (!state) return;\n\n        var finalValue = info.fn(value, state.get(targetProperty));\n        if (finalValue instanceof Error) return;\n        try {\n          state.set(targetProperty, finalValue);\n        }\n        catch (e) {\n          console.info(e.message);\n        }\n      }, this);\n    }, this);\n\n    return this;\n  },\n\n  processMIDI: function(deviceName, property, value) {\n    var sources = this.findMappingsBySource('midi:' + deviceName + '.' + property);\n    if (!sources || !sources.length) return this;\n    return this.process(sources, value);\n  }\n});\n\nmodule.exports = Mappings;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./mapping/data.js\n// module id = 142\n// module chunks = 3 5","'use strict';\nvar assign = require('lodash.assign');\n\nfunction Settings(name, defaults) {\n  this.name = name;\n  var loaded = {};\n  try {\n    loaded = JSON.parse(localStorage.getItem(name) || '{}');\n  }\n  catch (e) {\n    console.warn('settings loading error', e);\n  }\n  this._vars = assign({}, defaults, loaded);\n}\n\nSettings.prototype._vars = {};\n\nSettings.prototype.set = function(name, value) {\n  this._vars[name] = value;\n  try {\n    localStorage.setItem(this.name, JSON.stringify(this._vars));\n  }\n  catch (e) {\n    console.warn('error while trying to store %s', name, e);\n  }\n  return value;\n};\n\nSettings.prototype.get = function(name, defaultValue) {\n  return this._vars[name] === undefined ? defaultValue : this._vars[name];\n};\n\nmodule.exports = Settings;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./controller/settings.js\n// module id = 143\n// module chunks = 3","'use strict';\n\nvar State = require('ampersand-state');\nvar Collection = require('ampersand-collection');\n\nvar midiMappings = {\n  'KORG INC.': {\n    'KP3 MIDI 1': require('./devices/korg/kp3'),\n    'nanoKONTROL2 MIDI 1': require('./devices/korg/nk2')\n  },\n  'AKAI professional LLC': {\n    'LPD8 MIDI 1': require('./devices/akai/lpd8')\n  },\n  'Focusrite A.E. Ltd': {\n    'Launchpad Mini MIDI 1': require('./devices/novation/lpm')\n  }\n};\n\n\nvar MIDIState = State.extend({\n  props: {\n    manufacturer: 'string',\n    name: 'string'\n  },\n\n  session: {\n    active: ['boolean', true, true],\n    connection: 'string',\n    state: 'string',\n    type: 'string',\n    id: 'string',\n    version: 'string'\n  }\n});\n\n\n\nfunction getMappings(manufacturer, name) {\n  var m = midiMappings || {};\n  if (!m[manufacturer] || !m[manufacturer][name]) {\n    return;\n  }\n  return m[manufacturer][name] || function(){};\n}\n\n\nfunction handleMIDIMessage(accessState, model) {\n  // var setThrottled = throttle(function(name, velocity) {\n  //   model.set(name, velocity);\n  // }, 1000 / 16);\n  var _mappings = getMappings(model.manufacturer, model.name);\n\n  return function(MIDIMessageEvent) {\n    if (!model.active) { return; }\n    var info = _mappings(MIDIMessageEvent.data);\n    // if (info.name) setThrottled(info.name, info.velocity);\n    if (model.collection.parent && info.name) model.collection.parent.trigger('midi:change', model.id, info.name, info.velocity);\n  };\n}\n\n\nvar MIDIAccessState = State.extend({\n  mappable: {\n    source: ['inputs'],\n    target: []\n  },\n\n  registerInput: function(info) {\n    var accessState = this;\n    var _mappings = getMappings(info.manufacturer, info.name);\n    if (!_mappings) {\n      if (info.name !== 'Midi Through Port-0') {\n        // console..warn('Unrecognized MIDI controller %s from %s', info.name, info.manufacturer);\n      }\n      return;\n    }\n\n    var props = {};\n    var sources = [];\n\n    Object.keys(_mappings.note || {}).forEach(function(key) {\n      sources.push(_mappings.note[key]);\n      props[_mappings.note[key]] = ['number', true, 0];\n    });\n\n    var Constructor = MIDIState.extend({\n      mappable: {\n        source: sources,\n        target: []\n      },\n      props: props\n    });\n\n    var model = new Constructor({\n      connection: info.connection,\n      state: info.state,\n      type: info.type,\n      id: _mappings.prefix,//info.id,\n      manufacturer: info.manufacturer,\n      name: info.name,\n      version: info.version\n    });\n\n    if (typeof info.onmidimessage !== 'undefined') {\n      info.onmidimessage = handleMIDIMessage(this, model);\n    }\n\n    model.on('all', function(evtName, name, velocity) {\n      if (evtName.slice(0, 5) === 'midi:') accessState.trigger(name, velocity);\n    });\n\n    accessState.inputs.add(model);\n  },\n\n  initialize: function(options) {\n    options = options || {};\n    var accessState = this;\n\n\n    function MIDIAccessChanged() {\n      if (!accessState.MIDIAccess) {\n        accessState.inputs.reset([]);\n        return;\n      }\n      accessState.inputs.reset();\n      accessState.MIDIAccess.inputs.forEach(accessState.registerInput, accessState);\n      accessState.trigger('change:inputs');\n    }\n\n    accessState.on('change:MIDIAccess', MIDIAccessChanged);\n\n    if (typeof options.MIDIAccess === 'undefined') {\n      if (!navigator.requestMIDIAccess) {\n        accessState.MIDIAccess = false;\n        return;\n      }\n\n      navigator.requestMIDIAccess()\n        .then(function(MIDIAccess) {\n          accessState.MIDIAccess = MIDIAccess;\n          accessState.MIDIAccess.onstatechange = function(evt) {\n            accessState.MIDIAccess = evt.currentTarget;\n            MIDIAccessChanged();\n          };\n        }, function() {\n          accessState.MIDIAccess = false;\n        });\n    }\n  },\n\n  session: {\n    MIDIAccess: {\n      type: 'any',\n      default: false\n    }\n  },\n\n  collections: {\n    inputs: Collection.extend({\n    })\n  },\n\n  toJSON: function() {\n    var obj = {};\n    obj.inputs = this.inputs.toJSON();\n    return obj;\n  }\n});\n\nmodule.exports = MIDIAccessState;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./midi/state.js\n// module id = 144\n// module chunks = 3","'use strict';\nvar View = require('./../controller/control-view');\nvar SignalDetailsView = require('./details-view');\nvar SignalControlView = View.extend({\n  template: '<section class=\"rows signal\">' +\n    '<header class=\"row\">' +\n      '<h3 class=\"row name\"></h3>' +\n    '</header>' +\n\n    // '<div class=\"row gutter-horizontal columns model text-center\">' +\n    //   '<div class=\"column input\"></div>' +\n    //   '<div class=\"column gutter-horizontal no-grow\">&raquo;</div>' +\n    //   '<div class=\"column result\"></div>' +\n    // '</div>' +\n\n    '<div class=\"row gutter-horizontal columns test text-center\">' +\n      '<input class=\"column input\" placeholder=\"Input\" type=\"text\"/>' +\n      '<div class=\"column gutter-horizontal no-grow\">&raquo;</div>' +\n      '<div class=\"column result\"></div>' +\n    '</div>' +\n  '</section>',\n\n  session: {\n    input: 'any',\n    showMappings: ['boolean', true, false]\n  },\n\n  derived: {\n    result: {\n      deps: ['input', 'model'/*, 'model.transformations'*/],\n      fn: function() {\n        return this.model.computeSignal(this.input);\n      }\n    }\n  },\n\n  bindings: {\n    'model.name': '.name',\n    // 'model.input': '.model .input',\n    // 'model.result': '.model .result',\n    result: '.test .result'\n  },\n\n  events: {\n    'change .test .input': '_testValue',\n    'click header h3': '_showDetails'\n  },\n\n  _showDetails: function () {\n    this.rootView.showDetails(new SignalDetailsView({\n      parent: this,\n      model: this.model\n    }));\n  },\n\n  _testValue: function(evt) {\n    this.input = evt.target.value.trim();\n  },\n\n  render: function () {\n    this.renderWithTemplate();\n    var inputEl = this.query('.test .input');\n    if (inputEl && !inputEl.value) {\n      inputEl.value = this.input || null;\n    }\n    return this;\n  }\n});\n\nSignalControlView.types = {};\n\nmodule.exports = SignalControlView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./signal/control-view.js\n// module id = 265\n// module chunks = 3","'use strict';\nvar assign = require('lodash.assign');\nvar DetailsView = require('./../controller/details-view');\nvar View = require('./../controller/control-view');\nvar objectPath = require('./../object-path');\n\nvar StylePropertyView = View.extend({\n  template: `\n    <div class=\"columns object-prop prop-type-default\">\n      <div class=\"column gutter text-right prop-name\"></div>\n      <div class=\"column no-grow prop-value-reset\">\n        <button class=\"vfi-cancel\"></button>\n      </div>\n      <div class=\"column prop-value\">\n        <input name=\"value\" type=\"text\" />\n      </div>\n      <div class=\"column prop-mapping-clear no-grow\">\n        <button class=\"vfi-unlink\"></button>\n      </div>\n      <div class=\"column prop-mapping-name\">\n        <input name=\"mapping-name\" type=\"text\" />\n      </div>\n      <div class=\"column no-grow\">\n        <button class=\"mapping-details\"></button>\n      </div>\n    </div>\n  `,\n\n  initialize: function() {\n    View.prototype.initialize.apply(this, arguments);\n    this.listenToAndRun(this.rootView.mappings, 'change:targets', function() {\n      this.trigger('change:rootView.mappings');\n    });\n  },\n\n  derived: {\n    suggestionHelper: {\n      cache: false,\n      fn: function() {\n        var view = this.parent;\n        while (view) {\n          if (view.suggestionHelper) return view.suggestionHelper;\n          view = view.parent;\n        }\n        return false;\n      }\n    },\n\n    propertyPath: {\n      deps: ['model.name', 'parent.modelPath'],\n      fn: function() {\n        return this.parent.modelPath + '.styleProperties.' + this.model.name + '.value';\n      }\n    },\n\n    mapping: {\n      deps: ['propertyPath', 'rootView.mappings'],\n      fn: function() {\n        return this.rootView.mappings.findMappingByTarget(this.propertyPath);\n      }\n    }\n  },\n\n  bindings: {\n    'model.name': '.prop-name',\n    'model.value': {\n      selector: '[name=\"value\"]',\n      type: 'value'\n    },\n\n    'mapping.name': [\n      {\n        type: 'booleanAttribute',\n        selector: '.prop-mapping-clear button',\n        name: 'disabled',\n        invert: true\n      },\n      {\n        type: 'value',\n        selector: '[name=\"mapping-name\"]'\n      },\n      {\n        type: 'booleanClass',\n        selector: '.mapping-details',\n        yes: 'vfi-eye',\n        no: 'vfi-eye-off'\n      },\n      {\n        type: 'booleanAttribute',\n        selector: '.mapping-details',\n        name: 'disabled',\n        invert: true\n      },\n      {\n        type: 'booleanAttribute',\n        selector: '.prop-value-reset button',\n        name: 'disabled'\n      }\n    ]\n  },\n\n  commands: {\n    'click .prop-mapping-clear button': 'updateMapping _handleRemoveMappingTarget',\n    'change [name=\"value\"]': 'propChange _handleChange',\n    // 'click .prop-value-reset button': 'resetProp _handleReset',\n  },\n\n  _handleRemoveMappingTarget: function() {\n    var propertyPath = this.propertyPath;\n    var mapping = this.mapping.serialize();\n    mapping.targets = mapping.targets.filter(function(target) {\n      return target !== propertyPath;\n    });\n    return {mapping: mapping};\n  },\n\n  _handleChange: function() {\n    return {\n      path: objectPath(this.model),\n      property: 'value',\n      value: this.query('[name=\"value\"]').value\n    };\n  },\n\n  events: {\n    'focus [name=\"mapping-name\"]': '_suggestMapping',\n    'click button.mapping-details': '_showMapping'\n  },\n\n  _suggestMapping: function(evt) {\n    var view = this;\n    var helper = view.suggestionHelper;\n    var mappings = this.rootView.mappings;\n    var propertyPath = this.propertyPath;\n\n    helper.attach(evt.target, function(selected) {\n      var mappingState = mappings.get(selected);\n      if (!mappingState) return;\n      var mapping = mappingState.serialize();\n      mapping.targets.push(propertyPath);\n      view.sendCommand('updateMapping', {\n        mapping: mapping\n      });\n      helper.detach();\n    }).fill(mappings.map(function(state) { return state.name; }));\n  },\n\n  _showMapping: function() {\n    var mapping = this.mapping;\n    this.rootView.regionRight.focusTab('Mappings');\n    this.rootView.mappingsView.mappingsList.views.forEach(function(view) {\n      if (view.model === mapping) {\n        view.el.scrollIntoView();\n        view.blink();\n      }\n    });\n  }\n});\n\n\n\nvar LayerDetailsView = DetailsView.extend({\n  template: `\n    <section>\n      <header>\n        <div class=\"columns\">\n          <h3 class=\"column\">Details for <span data-hook=\"name\"></span> <small data-hook=\"type\"></small></h3>\n          <div class=\"column no-grow\"><button class=\"vfi-eye\" name=\"show-origin\"></button></div>\n        </div>\n        <h5 data-hook=\"object-path\"></h5>\n      </header>\n\n      <div class=\"row columns\">\n        <div class=\"columns\"><input type=\"text\" name=\"style-prop-name\" placeholder=\"--css-var-name\" /></div>\n        <div class=\"columns\"><input type=\"text\" name=\"style-prop-default\" placeholder=\"2px, 100%, \" /></div>\n        <div class=\"columns no-grow\"><button name=\"style-prop-add\" class=\"vfi-plus\"></button></div>\n      </div>\n\n      <div class=\"row style-props\" ></div>\n      <hr/>\n      <div class=\"row mappings props\"></div>\n    </section>\n  `,\n\n\n  events: assign(DetailsView.prototype.events, {\n    'click [name=show-origin]': '_showOrigin',\n    'click [name=style-prop-add]': 'addStyleProperty'\n  }),\n\n  _showOrigin: function() {\n    this.rootView.trigger('blink', this.modelPath);\n  },\n\n  addStyleProperty: function() {\n    var val = this.query('[name=style-prop-default]').value;\n    var props = this.model.styleProperties.serialize();\n    props.push({\n      name: this.query('[name=style-prop-name]').value,\n      default: val,\n      value: val\n    });\n    this.rootView.sendCommand('propChange', {\n      path: 'layers.' + this.model.getId(),\n      property: 'styleProperties',\n      value: props\n    });\n  },\n\n  render: function() {\n    DetailsView.prototype.render.apply(this, arguments);\n\n    if (this.styleProperties) {\n      this.styleProperties.remove();\n    }\n\n    if (this.model.styleProperties) {\n      this.styleProperties = this.renderCollection(this.model.styleProperties, StylePropertyView, '.style-props');\n    }\n\n    return this;\n  }\n});\n\nLayerDetailsView.types = {};\n\nmodule.exports = LayerDetailsView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/details-view.js\n// module id = 266\n// module chunks = 3","'use strict';\nvar assign = require('lodash.assign');\nvar SignalControlView = require('./../control-view');\nvar HSLASignalControlView = SignalControlView.types.hsla = SignalControlView.extend({\n  template: [\n    '<section class=\"rows signal signal-color\">',\n    '<header class=\"row\">',\n    '<h3 class=\"name\"></h3>',\n    '</header>',\n\n    '<div class=\"row columns gutter-horizontal gutter-bottom\">',\n    '<div class=\"column result-color no-grow\"></div>',\n    '<div class=\"column result gutter-left\"></div>',\n    '</div>',\n\n    '<div class=\"row mappings props\"></div>',\n    '</section>'\n  ].join(''),\n\n  bindings: assign({}, SignalControlView.prototype.bindings, {\n    'model.result': [\n      {\n        selector: '.result-color',\n        type: function(el, val) {\n          el.style.backgroundColor = val;\n        }\n      },\n      {\n        selector: '.result',\n        type: 'text'\n      }\n    ]\n  })\n});\nmodule.exports = HSLASignalControlView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./signal/hsla/control-view.js\n// module id = 267\n// module chunks = 3","'use strict';\nvar View = require('./../controller/control-view');\nvar MIDIView = View.extend({\n  template: [\n    '<li class=\"gutter\">',\n    '<span class=\"name\"></span> ',\n    '</li>'\n  ].join(''),\n  bindings: {\n    'model.active': {\n      type: 'booleanClass'\n    },\n    'model.state': '.state',\n    'model.name': '.name'\n  },\n\n  events: {\n    click: '_handleClick'\n  },\n\n  _handleClick: function() {\n    this.model.toggle('active');\n  }\n});\n\nvar MIDIAccessView = View.extend({\n  template:\n    '<div class=\"midi-access\">' +\n      '<div class=\"midi-inputs\">' +\n        '<div class=\"gutter\">Inputs</div>' +\n        '<ul></ul>' +\n      '</div>' +\n    '</div>',\n\n  render: function() {\n    var originalClass;\n    if (this.el) {\n      originalClass = this.el.className;\n    }\n    this.renderWithTemplate();\n    if (originalClass) {\n      this.el.className = originalClass;\n    }\n    this.inputsView = this.renderCollection(this.model.inputs, MIDIView, '.midi-inputs ul');\n    // this.outputsView = this.renderCollection(this.model.outputs, MIDIView, '.midi-outputs ul');\n    return this;\n  }\n});\n\nmodule.exports = MIDIAccessView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./midi/view.js\n// module id = 274\n// module chunks = 3","'use strict';\nvar assign = require('lodash.assign');\nvar SignalControlView = require('./../control-view');\nvar BeatSignalControlView = SignalControlView.types.beat = SignalControlView.extend({\n  template: '<section class=\"rows signal signal-beat\">' +\n    '<header class=\"row\">' +\n      '<h3 class=\"name\"></h3>' +\n    '</header>' +\n\n    '<div class=\"detector\">' +\n      '<button class=\"avg\">Tap</button>' +\n    '</div>' +\n\n    '<div class=\"row columns gutter-horizontal gutter-bottom\">' +\n      '<div class=\"column result-dot no-grow gutter-right\"></div>' +\n      '<div class=\"column result gutter-left\">' +\n        '<input class=\"column input\" placeholder=\"BPM\" data-hook=\"input\" />' +\n      '</div>' +\n    '</div>' +\n\n    '<div class=\"row mappings props\"></div>' +\n  '</section>',\n\n  bindings: assign({}, SignalControlView.prototype.bindings, {\n    avg: {\n      type: 'text',\n      selector: '.avg'\n    },\n    'model.input': {\n      type: 'value',\n      hook: 'input'\n    },\n    'model.result': [\n      {\n        selector: '.result-dot',\n        type: function(el, val) {\n          el.style.backgroundColor = 'hsla(190, 81%, 67%,' + (val / 100) + ')';\n        }\n      }\n    ]\n  }),\n\n  events: assign({}, SignalControlView.prototype.events, {\n    'click .detector > button': 'tap'\n  }),\n\n  commands: {\n    'change [data-hook=input]': 'propChange _updateBPM'\n  },\n\n  _updateBPM: function() {\n    return {\n      path: 'signals.' + this.model.getId(),\n      property: 'input',\n      value: parseInt(this.queryByHook('input').value.trim(), 10)\n    };\n  },\n\n  session: {\n    wait: ['number', true, 2],\n    avg: ['number', true, 0],\n    count: ['number', true, 0],\n    first: ['number', true, 0],\n    previous: ['number', true, 0]\n  },\n\n  _resetDetector: function() {\n    this.set({\n      count: 0,\n      first: 0,\n      previous: 0\n    });\n  },\n\n  tap: function() {\n    var timeSeconds = new Date();\n    var msecs = timeSeconds.getTime();\n    var wait = 2;\n\n    if ((msecs - this.previous) > 1000 * wait) {\n      this.count = 0;\n    }\n\n    if (!this.count) {\n      this.first = msecs;\n      this.count = 1;\n    }\n    else {\n      this.avg = Math.round((60000 * this.count / (msecs - this.first)) * 100) / 100;\n      this.count++;\n    }\n\n    this.sendCommand('propChange', {\n      path: 'signals.' + this.model.getId(),\n      property: 'input',\n      value: this.avg\n    });\n\n    this.previous = msecs;\n  }\n});\nmodule.exports = BeatSignalControlView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./signal/beat/control-view.js\n// module id = 275\n// module chunks = 3","'use strict';\nvar SignalControlView = require('./../control-view');\nvar HSLASignalControlView = require('./../hsla/control-view');\n\nvar RGBASignalControlView = SignalControlView.types.rgba = HSLASignalControlView.extend({});\n\nmodule.exports = RGBASignalControlView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./signal/rgba/control-view.js\n// module id = 276\n// module chunks = 3","var localForage = require('localforage');\n\nlocalForage.config({\n  // driver      : localforage.WEBSQL, // Force WebSQL; same as using setDriver()\n  name        : 'visualFiha',\n  version     : 1.0,\n  size        : 4980736, // Size of database, in bytes. WebSQL-only for now.\n  storeName   : 'keyvaluepairs', // Should be alphanumeric, with underscores.\n  description : 'Visual Fiha storage'\n});\n\nmodule.exports = localForage;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./storage.js\n// module id = 277\n// module chunks = 3","module.exports = function() {\n\treturn new Worker(__webpack_public_path__ + \"worker-build.js\");\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/worker-loader?name=worker-build.js!./web-worker.js\n// module id = 642\n// module chunks = 3","'use strict';\nvar View = require('./control-view');\nvar ViewSwitcher = require('ampersand-view-switcher');\nvar MIDIAccessView = require('./../midi/view');\nvar SignalsView = require('./../signal/signals-view');\nvar LayersView = require('./../layer/layers-view');\nvar SuggestionView = require('./suggestion-view');\nvar AudioSource = require('./audio-source-view');\nvar AceEditor = require('./ace-view');\nvar RegionView = require('./region-view');\nvar GistView = require('./gist-view');\nvar MappingsControlView = require('./../mapping/control-view');\nvar ControlScreenControls = require('./control-screen-controls-view');\nvar LocalforageView = require('./localforage-view');\nvar objectPath = require('./../object-path');\n// var Timeline = require('./timeline-view');\n\n\n\n\n\nvar ControllerView = View.extend({\n  initialize: function(options) {\n    var controllerView = this;\n    this.signals = options.signals;\n    this.midi = options.midi;\n    this.mappings = options.mappings;\n    if (!this.router) {\n      throw new Error('Missing router options for ControllerView');\n    }\n\n    this.listenTo(this.router, 'all', function(...args) {\n      if (args[0].indexOf('app:') === 0) this.trigger(...args);\n    });\n\n    [\n      'minDecibels',\n      'maxDecibels',\n      'smoothingTimeConstant',\n      'fftSize'\n    ].forEach(function(name) {\n      controllerView.on('change:' + name, function () {\n        if (!controllerView.audioAnalyser) return;\n        controllerView.audioAnalyser[name] = controllerView[name];\n      });\n    }, controllerView);\n\n\n    controllerView._animate();\n\n    if (options.autoStart) {\n      controllerView.play();\n    }\n\n    if (controllerView.el) {\n      controllerView._attachSuggestionHelper();\n    }\n    else {\n      controllerView.once('change:el', controllerView._attachSuggestionHelper);\n    }\n\n    controllerView.listenTo(controllerView.model.layers, 'sendCommand', function(...args) {\n      controllerView.sendCommand(...args);\n    });\n\n    this._animate();\n  },\n\n  midiSources: function() {\n    var eventNames = [];\n    this.midi.inputs.forEach(function(midiInput) {\n      var id = midiInput.getId();\n      eventNames = eventNames.concat(midiInput.mappable.source.map(function(property) {\n        return 'midi:' + id + '.' + property;\n      }));\n    });\n    return eventNames;\n  },\n\n  sendCommand: function(name, payload, callback) {\n    if (!this.router || !this.router.worker) return;\n    this.router.sendCommand(name, payload, callback);\n    return this;\n  },\n\n  _animate: function(timestamp) {\n    if (this.controllerSparkline) {\n      this.controllerSparkline.update(1000 / ((timestamp - this.model.frametime) - this.model.firstframetime));\n    }\n\n    if (this.audioSource) {\n      this.audioSource.update();\n    }\n\n    this.model.frametime = timestamp - this.model.firstframetime;\n    this.update();\n\n    this._arId = window.requestAnimationFrame(this._animate.bind(this));\n  },\n\n  update: function() {\n    var analyser = this.audioAnalyser;\n\n    var freqArray = this.audioFrequencyArray;\n    analyser.getByteFrequencyData(freqArray);\n\n    var timeDomainArray = this.audioTimeDomainArray;\n    analyser.getByteTimeDomainData(timeDomainArray);\n\n    var command = {\n      frametime: this.model.frametime,\n      audio: {\n        bufferLength: analyser.frequencyBinCount,\n        frequency: freqArray,\n        timeDomain: timeDomainArray\n      }\n    };\n\n    this.sendCommand('heartbeat', command);\n  },\n\n  derived: {\n    audioContext: {\n      deps: [],\n      fn: function() {\n        return new window.AudioContext();\n      }\n    },\n    audioAnalyser: {\n      deps: ['audioContext'],\n      fn: function() {\n        var analyser = this.audioContext.createAnalyser();\n        try {\n          analyser.minDecibels = this.minDecibels;\n          analyser.maxDecibels = this.maxDecibels;\n          analyser.smoothingTimeConstant = this.smoothingTimeConstant;\n          analyser.fftSize = this.fftSize;\n        }\n        catch (e) {}\n        return analyser;\n      }\n    },\n    audioFrequencyArray: {\n      deps: ['audioAnalyser', 'fftSize'],\n      fn: function () {\n        return new window.Uint8Array(this.audioAnalyser.frequencyBinCount);\n      }\n    },\n    audioTimeDomainArray: {\n      deps: ['audioAnalyser', 'fftSize'],\n      fn: function () {\n        return new window.Uint8Array(this.audioAnalyser.frequencyBinCount);\n      }\n    },\n    computedStyle: {\n      deps: ['el'],\n      fn: function() {\n        return window.getComputedStyle(this.el);\n      }\n    }\n  },\n\n  session: {\n    _arId: 'number',\n    broadcastId: ['string', true, 'vfBus'],\n    currentDetails: 'state',\n    fftSize: ['number', true, 256],\n    maxDecibels: ['number', true, -10],\n    minDecibels: ['number', true, -90],\n    playing: ['boolean', true, false],\n    router: 'any',\n    showControlScreen: ['boolean', true, false],\n    controlScreenWidth: ['number', true, 33],\n    controlScreenHeight: ['number', true, 33],\n    smoothingTimeConstant: ['number', true, 0.85],\n    workerPerformance: 'string'\n  },\n\n  play: function() {\n    this.playing = true;\n    if (!this.model.firstframetime) {\n      this.model.firstframetime = performance.now();\n    }\n    return this;\n  },\n  pause: function() {\n    this.playing = false;\n    return this;\n  },\n  stop: function() {\n    this.playing = false;\n    this.model.firstframetime = this.model.frametime = 0;\n    return this;\n  },\n\n  subviews: {\n    controlScreenControls: {\n      waitFor: 'el',\n      selector: '.control-screen-controls',\n      prepareView: function(el) {\n        if (this.router) {\n          this.set({\n            showControlScreen: this.router.settings.get('showControlScreen', true),\n            controlScreenWidth: this.router.settings.get('controlScreenWidth', 45),\n            controlScreenHeight: this.router.settings.get('controlScreenHeight', 45)\n          });\n        }\n\n        var view = new ControlScreenControls({\n          el: el,\n          active: this.showControlScreen,\n          width: this.controlScreenWidth,\n          height: this.controlScreenHeight,\n          parent: this\n        });\n\n        this.listenToAndRun(view, 'change:active', function() {\n          this.showControlScreen = view.active;\n          if (this.router) {\n            this.router.settings.set('showControlScreen', this.showControlScreen);\n          }\n        });\n        this.listenToAndRun(view, 'change:width', function() {\n          this.controlScreenWidth = view.width;\n          if (this.router) {\n            this.router.settings.set('controlScreenWidth', this.controlScreenWidth);\n          }\n        });\n        this.listenToAndRun(view, 'change:height', function() {\n          this.controlScreenHeight = view.height;\n          if (this.router) {\n            this.router.settings.set('controlScreenHeight', this.controlScreenHeight);\n          }\n        });\n        return view;\n      }\n    },\n\n    regionRight: {\n      waitFor: 'el',\n      selector: '.region-right',\n      prepareView: function(el) {\n        var parent = this;\n        function buildLayers() {\n          if (parent.layersView && parent.layersView.remove) {\n            parent.layersView.remove();\n            parent.stopListening(parent.layersView);\n          }\n          parent.layersView = new LayersView({\n            collection: parent.model.layers,\n            parent: parent,\n            model: parent.model\n          });\n          return parent.layersView;\n        }\n\n        parent.mappingsView = new MappingsControlView({\n          collection: parent.mappings,\n          parent: parent,\n          model: parent.model\n        });\n\n        function buildSignals() {\n          if (parent.signalsView && parent.signalsView.remove) {\n            parent.signalsView.remove();\n            parent.stopListening(parent.signalsView);\n          }\n          parent.signalsView = new SignalsView({\n            collection: parent.signals,\n            parent: parent,\n            model: parent.model\n          });\n          return parent.signalsView;\n        }\n\n        function buildCodeEditor() {\n          if (parent.codeEditor) {\n            parent.stopListening(parent.codeEditor);\n          }\n          parent.codeEditor = new AceEditor({\n            parent: parent\n          });\n          return parent.codeEditor;\n        }\n\n        var view = new RegionView({\n          parent: parent,\n          el: el,\n          tabs: [\n            {name: 'Layers', rebuild: buildLayers, pinned: true, active: true},\n            {name: 'Signals', rebuild: buildSignals, pinned: true},\n            {name: 'Mappings', view: parent.mappingsView, pinned: true},\n            {name: 'Editor', rebuild: buildCodeEditor, pinned: true}\n          ]\n        });\n\n        view.el.classList.add('region-right');\n        view.el.classList.add('column');\n        view.el.classList.add('rows');\n\n        return view;\n      }\n    },\n\n    regionLeftBottom: {\n      waitFor: 'el',\n      selector: '.region-left-bottom',\n      prepareView: function(el) {\n        var parent = this;\n        var styles = this.computedStyle;\n\n        function buildAudioSource() {\n          parent.audioSource = new AudioSource({\n            audioAnalyser: parent.audioAnalyser,\n            parent: parent,\n            color: styles.color\n          });\n          return parent.audioSource;\n        }\n        buildAudioSource();\n\n        if (parent.midi) {\n          parent.MIDIAccess = new MIDIAccessView({\n            parent: parent,\n            model: parent.midi\n          });\n        }\n\n        // parent.timeline = new Timeline({\n        //   parent: this,\n        //   entries: []\n        // });\n\n        var view = new RegionView({\n          parent: parent,\n          el: el,\n          currentView: parent.mappingsView,\n          tabs: [\n            {name: 'MIDI', view: parent.MIDIAccess, pinned: true, active: true},\n            {name: 'Audio', rebuild: buildAudioSource, pinned: true},\n            // {name: 'Timeline', view: parent.timeline, pinned: true, active: true}\n          ]\n        });\n\n        view.el.classList.add('row');\n        view.el.classList.add('grow-l');\n        view.el.classList.add('region-left-bottom');\n\n        return view;\n      }\n    },\n\n    localforageView: {\n      waitFor: 'el',\n      selector: '.controller > .header',\n      prepareView: function(el) {\n        var view = new LocalforageView({parent: this, model: this.model});\n        el.appendChild(view.render().el);\n        return view;\n      }\n    },\n\n    gistView: {\n      waitFor: 'el',\n      selector: '.controller > .header',\n      prepareView: function(el) {\n        var view = new GistView({parent: this, model: this.model});\n        el.appendChild(view.render().el);\n        return view;\n      }\n    }\n  },\n\n  _attachSuggestionHelper: function() {\n    if (this.suggestionHelper) { return; }\n    this.suggestionHelper = this.registerSubview(new SuggestionView({\n      parent: this\n    }));\n  },\n\n  remove: function() {\n    View.prototype.remove.apply(this, arguments);\n  },\n\n  bindings: {\n    workerPerformance: '.worker-performance',\n    showControlScreen: [\n      {\n        selector: '.control-screen',\n        type: 'toggle'\n      },\n      {\n        selector: '.control-screen',\n        type: function(el, val) {\n          el.src = !val ? '' : './screen.html#' + this.broadcastId;\n        }\n      }\n    ],\n    controlScreenWidth: {\n      selector: '.region-left',\n      type: function(el, val) {\n        el.style.width = val +'%';\n      }\n    },\n    controlScreenHeight: {\n      selector: '.region-left-top',\n      type: function(el, val) {\n        var parentNode = el.parentNode;\n        var height = ((Math.max(100, parentNode.clientHeight) / 100) * val) +'px';\n        el.style.maxHeight = height;\n        el.style.minHeight = height;\n      }\n    },\n    playing: [\n      {\n        type: 'toggle',\n        selector: '[name=\"play\"]',\n        invert: true\n      },\n      {\n        type: 'toggle',\n        selector: '[name=\"pause\"]'\n      }\n    ]\n  },\n\n  commands: {\n    'click [name=\"play\"]': 'play',\n    'click [name=\"pause\"]': 'pause',\n    'click [name=\"stop\"]': 'stop'\n  },\n\n  events: {\n    'click [name=\"screen\"]': '_openScreen',\n    'click [name=\"setup-editor\"]': '_setupEditor'\n  },\n\n  _openScreen: function() {\n    window.open('./screen.html#' + this.broadcastId, 'screen', 'width=800,height=600,location=no');\n  },\n\n  toJSON: function() {\n    return {\n      signals: this.signals.toJSON(),\n      mappings: this.mappings.toJSON(),\n      layers: this.model.layers.toJSON()\n    };\n  },\n\n  fromJSON: function(obj) {\n    this.router._sendBootstrap(obj);\n    return this;\n  },\n\n\n\n  getEditor: function() {\n    this.regionRight.focusTab('Editor');\n    return this.codeEditor;\n  },\n\n  _setupEditor: function() {\n    var view = this;\n    var editor = view.getEditor();\n\n    editor.editCode({\n      autoApply: false,\n      title: 'Setup',\n      script: view.gistView.toYaml(),\n      language: 'yaml',\n      onapply: function(str) {\n        view.router._sendBootstrap(view.gistView.fromYaml(str), view._setupEditor.bind(view));\n      }\n    });\n  },\n\n  showDetails: function (view) {\n    if (view === this.currentDetails) return this;\n    var tabs = this.regionLeftBottom.tabs;\n    var tabName = view.modelPath || objectPath(view.model);\n    var found = tabs.get(tabName);\n    if (!found) {\n      found = tabs.add({name: tabName, view: view});\n    }\n    else {\n      found.view = view;\n    }\n\n    this.regionLeftBottom.focusTab(tabName);\n    found.view.blink();\n    return this;\n  },\n\n  render: function () {\n    var controllerView = this;\n    this.renderWithTemplate();\n\n    this.cacheElements({\n      jsHeapLimit: '.heap-limit span',\n      jsHeapTotal: '.heap-total span',\n      jsHeapUsed: '.heap-used span',\n      detailsEl: '.details'\n    });\n\n    this.detailsSwitcher = new ViewSwitcher(this.detailsEl, {\n      show: function (view) {\n        controllerView.currentDetails = view;\n      }\n    });\n\n    return this;\n  },\n\n  autoRender: true,\n\n  /*\n  :sout=#http{dst=:8080/stream} :sout-keep\n  */\n  template: `\n    <div class=\"controller rows\">\n      <div class=\"row columns gutter-horizontal header\">\n        <div class=\"column no-grow gutter-right\">Visual Fiha</div>\n\n        <div class=\"column columns\">\n          <!-- <span class=\"column columns no-grow button-group\">\n            <button class=\"column gutter-horizontal\" name=\"play\"><span class=\"vfi-play\"></span></button>\n            <button class=\"column gutter-horizontal\" name=\"pause\"><span class=\"vfi-pause\"></span></button>\n            <button class=\"column gutter-horizontal\" name=\"stop\"><span class=\"vfi-stop\"></span></button>\n          </span> -->\n\n          <div class=\"column\"></div>\n\n          <div class=\"column worker-performance\"></div>\n\n          <div class=\"column no-grow control-screen-controls\"></div>\n\n          <div class=\"column no-grow\">\n            <button name=\"screen\">Open screen</button>\n          </div>\n\n          <div class=\"column\"></div>\n\n          <div class=\"column no-grow\">\n            <button name=\"setup-editor\">Setup editor</button>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row columns body\">\n        <div class=\"region-left column no-grow rows\">\n          <iframe class=\"region-left-top row control-screen\"></iframe>\n\n          <div class=\"region-left-bottom row grow-l rows\"></div>\n        </div>\n\n        <div class=\"region-right column rows settings\">\n        </div>\n      </div>\n    </div>\n  `\n});\nmodule.exports = ControllerView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./controller/view.js\n// module id = 644\n// module chunks = 3","'use strict';\nvar assign = require('lodash.assign');\nvar Collection = require('ampersand-collection');\nvar SignalState = require('./state');\nrequire('./beat/state');\nrequire('./hsla/state');\nrequire('./rgba/state');\n\nvar SignalCollection = Collection.extend({\n  mainIndex: 'name',\n  model: function(attrs, opts) {\n    var Constructor = SignalState.types[attrs.type] || SignalState;\n    var state = new Constructor(attrs, opts);\n    return state;\n  },\n\n  toJSON: function () {\n    return this.map(function (model) {\n      if (model.toJSON) {\n        return model.toJSON();\n      }\n      else {\n        var out = {};\n        assign(out, model);\n        delete out.collection;\n        return out;\n      }\n    });\n  }\n});\nmodule.exports = SignalCollection;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./signal/collection.js\n// module id = 646\n// module chunks = 3","'use strict';\nvar View = require('ampersand-view');\n\nfunction noop() {}\n\nfunction splitClean(str) {\n  return str.split(' ')\n            .map(p => p.trim())\n            .filter(p => p);\n}\n\nvar ControlView = View.extend({\n  _commandsBound: false,\n\n  blink: function() {\n    var classes = this.el.classList;\n    this.el.addEventListener('animationend', function() {\n      classes.remove('blink');\n    });\n    if (!classes.contains('blink')) {\n      classes.add('blink');\n    }\n    return this;\n  },\n\n  initialize: function() {\n    var view = this;\n\n    function initCommands() {\n      if (view.el) {\n        view.bindCommands();\n      }\n      else if (view.el) {\n        view.unbindCommands();\n      }\n    }\n\n    view.on('change:el', initCommands);\n\n    view.listenTo(view.rootView, 'blink', function(modelPath) {\n      console.info('blink', view.modelPath, view.modelPath && view.modelPath === modelPath);\n      if (view.modelPath && view.modelPath === modelPath) view.blink();\n    });\n  },\n\n  derived:{\n    rootView:{\n      deps:['parent'],\n      fn: function() {\n        for (var inst = this; inst; inst = inst.parent) {\n          if (!inst.parent) { return inst; }\n        }\n      }\n    }\n  },\n\n  sendCommand: function(...args) {\n    this.rootView.sendCommand(...args);\n  },\n\n  _commands: function(el) {\n    var view = this;\n    var commands = [];\n    var rootView = view.rootView;\n    el = el || view.el;\n    // not sure about that...\n    if (!el) return commands;\n\n    Object.keys(view.commands || {}).forEach(function(key) {\n      var evtNameSelector = splitClean(key);\n      var evtName = evtNameSelector.shift();\n      var selector = evtNameSelector.join(' ');\n      var info = view.commands[key];\n      var serializer = noop;\n      var command;\n\n      if (typeof info === 'string') {\n        var cmdNameMethodName = splitClean(info);\n        command = cmdNameMethodName[0];\n\n        if (cmdNameMethodName[1]) {\n          serializer = view[cmdNameMethodName[1]];\n\n          if (typeof serializer !== 'function') {\n            throw new Error('Command \"' + info + '\" method not found');\n          }\n        }\n\n        info = {};\n      }\n      else {\n        command = info.command;\n        serializer = info.serializer;\n      }\n\n      // var listener = throttle(function commandEventListener(...args) {\n      //   rootView.sendCommand(command, serializer(...args)/*, done*/);\n      // }, 1000 / 24);\n      var listener = function commandEventListener(...args) {\n        rootView.sendCommand(command, serializer.apply(view, ...args)/*, done*/);\n      };\n\n      var els = [view.el];\n      if (selector) {\n        els = el.querySelectorAll(selector);\n      }\n\n      commands.push({\n        event: evtName,\n        listener: listener,\n        command: command,\n        listenerOptions: {\n          passive: info.passive\n        },\n        elements: els\n      });\n    }, view);\n    return commands;\n  },\n\n  bindCommands: function(el) {\n    if (this._commandsBound) return this;\n    this._commands(el).forEach(function(info) {\n      for (var e = 0; e < info.elements.length; e++) {\n        info.elements[e].addEventListener(info.event, info.listener, info.listenerOptions);\n      }\n    });\n    this._commandsBound = true;\n    this.trigger('commands:bound');\n    return this;\n  },\n\n  unbindCommands: function(el) {\n    if (!this._commandsBound) return this;\n    this._commands(el).forEach(function(info) {\n      for (var e = 0; e < info.elements.length; e++) {\n        //? if (info.elements[e].removeEventListener)\n        info.elements[e].removeEventListener(info.event, info.listener, info.listenerOptions);\n      }\n    });\n    this._commandsBound = false;\n    this.trigger('commands:unbound');\n    return this;\n  },\n\n  remove: function() {\n    this.unbindCommands();\n    return View.prototype.remove.apply(this, arguments);\n  }\n});\n\nmodule.exports = ControlView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./controller/control-view.js\n// module id = 648\n// module chunks = 3","'use strict';\nvar View = require('./../controller/control-view');\nvar LayerDetailsView = require('./details-view');\nvar objectPath = require('./../object-path');\n\nvar LayerControlView = View.extend({\n  template: `\n    <section class=\"default-layer-control\">\n      <header class=\"columns\">\n        <div class=\"column no-grow gutter-right\"><button class=\"active prop-toggle\"></button></div>\n        <div class=\"column no-grow gutter-horizontal\"><button class=\"edit-css vfi-code\"></button></div>\n        <h3 class=\"column layer-name gutter-left\" data-hook=\"name\"></h3>\n        <div class=\"column no-grow text-right\"><button class=\"vfi-trash-empty remove-layer\"></button></div>\n      </header>\n\n      <div class=\"preview gutter-horizontal\"></div>\n\n      <div class=\"mappings props\"></div>\n    </section>\n  `,\n\n  events: {\n    'click .edit-css': '_editLayerStyles',\n    'click .layer-name': '_showDetails'\n  },\n\n\n  _showDetails: function () {\n    var DetailsViewConstructor = LayerDetailsView.types ? LayerDetailsView.types[this.model.getType()] : false;\n    DetailsViewConstructor = DetailsViewConstructor || LayerDetailsView;\n    this.rootView.showDetails(new DetailsViewConstructor({\n      parent: this,\n      model: this.model\n    }));\n  },\n\n  _editLayerStyles: function () {\n    var view = this;\n    var rootView = view.rootView;\n    var editorView = rootView.getEditor();\n    var id = view.model.getId();\n    editorView.editCode({\n      script: '#' + id + ' {\\n' + this.model.layerStyles + '\\n}',\n      language: 'css',\n      title: id + ' layer styles',\n      onshoworigin: function() {\n        rootView.trigger('blink', 'layers.' + id);\n      },\n      autoApply: true,\n      onvalidchange: function (str) {\n        var cleaned = str.split('{').pop().split('}').shift().trim();\n        view.sendCommand('propChange', {\n          path: 'layers.' + id,\n          property: 'layerStyles',\n          value: cleaned\n        });\n      }\n    });\n  },\n\n  commands: {\n    'click .remove-layer': 'removeLayer _layerName',\n    'click .active.prop-toggle': 'propChange _toggleActive'\n  },\n\n  _layerName: function() {\n    return {\n      layerName: this.model.name\n    };\n  },\n\n  _toggleActive: function() {\n    return {\n      path: objectPath(this.model),\n      property: 'active',\n      value: !this.model.active\n    };\n  },\n\n  bindings: {\n    'model.active': [\n      {\n        type: 'booleanClass',\n        name: 'disabled',\n        invert: true\n      },\n\n      {\n        type: 'booleanClass',\n        selector: '.active.prop-toggle',\n        yes: 'vfi-toggle-on',\n        no: 'vfi-toggle-off'\n      }\n    ],\n    'model.name': {\n      hook: 'name',\n      type: 'text'\n    },\n    'model.type': [\n      {\n        hook: 'type',\n        type: 'text'\n      },\n      {\n        type: 'class'\n      }\n    ]\n  },\n\n  derived: {\n    modelPath: {\n      deps: ['model'],\n      fn: function() {\n        return objectPath(this.model);\n      }\n    }\n  }\n});\n\nLayerControlView.types = {};\n\nmodule.exports = LayerControlView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/control-view.js\n// module id = 649\n// module chunks = 3","'use strict';\n\nfunction isCollectionOfParent(o, p) {\n  if (!p || !p._collections) return;\n  for (var name in p._collections) {\n    if (p[name] === o.collection) return name + '.' + o.getId();\n  }\n}\n\nfunction isChildOfParent(o, p) {\n  if (!p || !p._children) return;\n  for (var name in p._children) {\n    if (p[name] === o) return name;\n  }\n}\n\nfunction isPropOfParent(o, p) {\n  if (!p) return;\n  for (var name in p) {\n    if (p[name] === o) return name;\n  }\n}\n\nvar _paths = {};\nfunction objectPath(state) {\n  if (!state) return null;\n  if (_paths[state.cid]) return _paths[state.cid];\n  var parts = [];\n\n\n  function up(instance) {\n    var collectionName = instance.collection ?\n                          isCollectionOfParent(instance, instance.collection.parent) :\n                          null;\n    if (collectionName) {\n      parts.unshift(collectionName);\n      return up(instance.collection.parent);\n    }\n\n    var childName = isChildOfParent(instance, instance.parent);\n    if (childName) {\n      parts.unshift(childName);\n      return up(instance.parent);\n    }\n\n\n    var propName = isPropOfParent(instance, instance.parent);\n    if (propName) {\n      parts.unshift(propName);\n      return up(instance.parent);\n    }\n\n    if (instance.parent) up(instance.parent);\n  }\n\n  up(state);\n\n  _paths[state.cid] = parts.join('.');\n  return _paths[state.cid];\n}\n\nmodule.exports = objectPath;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./object-path.js\n// module id = 651\n// module chunks = 3","'use strict';\nvar State = require('ampersand-state');\n\nvar SignalState = State.extend({\n  idAttribute: 'name',\n  typeAttribute: 'type',\n\n  mappable: {\n    source: ['result'],\n    target: ['input']\n  },\n\n  props: {\n    name: ['string', true, null],\n    type: ['string', true, 'default'],\n    defaultValue: ['any', true, function () { return 1; }],\n    input: ['any', false, null]\n  },\n\n  derived: {\n    modelPath: {\n      deps: ['name'],\n      fn: function() {\n        return 'signals.' + this.name;\n      }\n    },\n    result: {\n      deps: ['input', 'transformations'],\n      fn: function() {\n        return this.computeSignal();\n      }\n    }\n  },\n\n  computeSignal: function(val) {\n    val = val || this.input;\n    return val;\n  }\n});\n\nSignalState.types = {};\n\nmodule.exports = SignalState;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./signal/state.js\n// module id = 652\n// module chunks = 3","'use strict';\n\nfunction resolve(path, context) {\n  if (!context) throw new Error('Missing context to solve mapping path');\n\n  function solver(str) {\n    var parts = str.split('.');\n\n    var f = function(instance) {\n      if (!parts.length) return instance;\n\n      var part = parts.shift();\n      if (instance[part] && instance[part].isCollection) {\n        return f(instance[part].get(parts.shift()));\n      }\n      else if (typeof instance[part] !== 'undefined') {\n        return f(instance[part]);\n      }\n    };\n    return f;\n  }\n\n  return solver(path)(context);\n}\n\nmodule.exports = resolve;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resolve.js\n// module id = 654\n// module chunks = 3 5","'use strict';\nvar assign = require('lodash.assign');\nvar Collection = require('ampersand-collection');\nvar State = require('ampersand-state');\nvar View = require('./control-view');\nvar objectPath = require('./../object-path');\n\nvar PropertyView = require('./property-view');\n\nvar DetailsView = View.extend({\n  template: `\n    <section class=\"row rows\">\n      <header class=\"row no-grow\">\n        <div class=\"columns\">\n          <h3 class=\"column\">Details for <span data-hook=\"name\"></span> <small data-hook=\"type\"></small></h3>\n        </div>\n        <h5 data-hook=\"object-path\"></h5>\n      </header>\n\n      <div class=\"row items\"></div>\n    </section>\n  `,\n\n  initialize: function() {\n    this.listenToAndRun(this, 'change:definition', function() {\n      this.properties.reset(this.definition);\n    });\n\n    this.listenTo(this.rootView, 'all', function(evtName) {\n      if (evtName.indexOf('app:') === 0 && evtName.indexOf('Mapping') > 0) {\n        this.trigger('change:model', this.model);\n      }\n      else if (evtName === 'blink') {\n        if(this.modelPath === arguments[1]) this.blink();\n      }\n    });\n  },\n\n  derived: {\n    propNames: {\n      deps: ['model'],\n      fn: function() {\n        var def = this.model.constructor.prototype._definition;\n        return Object.keys(def)\n          .filter(function(key) {\n            return [\n              'drawFunction',\n\n              'name',\n              'type'\n            ].indexOf(key) < 0;\n          });\n      }\n    },\n\n    definition: {\n      deps: ['propNames'],\n      fn: function() {\n        var def = this.model.constructor.prototype._definition;\n        return this.propNames\n          .map(function(name) {\n            return assign({name: name}, def[name]);\n          });\n      }\n    },\n\n    modelPath: {\n      deps: ['model'],\n      fn: function() {\n        return objectPath(this.model);\n      }\n    }\n  },\n\n  collections: {\n    properties: Collection.extend({\n      mainIndex: 'name',\n\n      model: State.extend({\n        idAttribute: 'name',\n\n        session: {\n          name: 'string',\n          allowNull: 'boolean',\n          default: 'any',\n          required: 'boolean',\n          test: 'any',\n          type: 'string',\n          values: 'array'\n        }\n      })\n    })\n  },\n\n  render: function() {\n    View.prototype.render.apply(this, arguments);\n\n    if (this.propertiesView) {\n      this.propertiesView.remove();\n    }\n\n    this.propertiesView = this.renderCollection(this.properties, function (opts) {\n      var Constructor = (PropertyView.names[opts.model.name] || PropertyView.types[opts.model.type] || PropertyView);\n      // console.info('property name: %s (%s), type: %s (%s)', opts.model.name, !!PropertyView.names[opts.model.name], opts.model.type, !!PropertyView.types[opts.model.type]);\n      return new Constructor(opts);\n    }, '.items');\n\n    this.trigger('change:model');\n    this.trigger('change:model.name');\n    this.trigger('change:modelPath');\n    return this;\n  },\n\n  bindings: {\n    'model.name': '[data-hook=name]',\n    'model.type': '[data-hook=type]',\n    modelPath: '[data-hook=\"object-path\"]'\n  }\n});\nmodule.exports = DetailsView;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./controller/details-view.js\n// module id = 655\n// module chunks = 3","'use strict';\nvar View = require('ampersand-view');\nvar canvasCompleter = require('./../layer/canvas/canvas-completer');\n\nvar AceEditor = View.extend({\n  editCode: function(options) {\n    options.autoApply = !!options.autoApply;\n    if (options.autoApply && typeof options.onvalidchange !== 'function') throw new Error('Missing onvalidchange function option');\n    if (!options.autoApply && typeof options.onapply !== 'function') throw new Error('Missing onapply function option');\n    options.original = options.script = options.script.toString();\n    this._cleanup().set(options).render();\n  },\n\n  template: `\n    <section class=\"row code-editor rows\">\n      <header>\n        <div class=\"columns\">\n          <h3 class=\"column\"><span data-hook=\"editor-title\"></span> <small data-hook=\"editor-language\"></small></h3>\n          <div class=\"column no-grow show-origin\"><button class=\"vfi-eye\" name=\"show-origin\"></button></div>\n        </div>\n      </header>\n\n      <div class=\"ace-editor row grow-xl\"></div>\n\n      <div class=\"ace-controls row no-grow gutter columns\">\n        <div class=\"column\"></div>\n        <div class=\"column no-grow gutter-right\">\n          <button class=\"no\" name=\"cancel\">Cancel</button>\n          <button class=\"yes\" name=\"apply\">Apply</button>\n        </div>\n      </div>\n    </section>\n  `,\n\n  session: {\n    title: 'string',\n    language: {\n      type: 'string',\n      values: ['javascript', 'yaml', 'css'],\n      required: true,\n      default: 'javascript'\n    },\n    autoApply: 'boolean',\n    errors: 'array',\n    editor: 'any',\n    original: ['string', true, ''],\n    script: ['string', true, ''],\n    onshoworigin: 'any',\n    onvalidchange: 'any',\n    onapply: 'any',\n    validator: 'any'\n  },\n\n  derived: {\n    pristine: {\n      deps: ['script', 'original'],\n      fn: function() {\n        return this.script === this.original;\n      }\n    }\n  },\n\n  bindings: {\n    script: {\n      type: function() {\n        if (!this.editor) return;\n        this.editor.setValue(this.script);\n      }\n    },\n\n    pristine: [\n      {\n          type: 'booleanClass',\n          name: 'pristine'\n      },\n      {\n        selector: '[name=cancel]',\n        type: 'booleanAttribute',\n        name: 'disabled'\n      },\n      {\n        selector: '[name=apply]',\n        type: 'booleanAttribute',\n        name: 'disabled'\n      }\n    ],\n\n    autoApply: {\n      type: 'booleanClass',\n      name: 'autoapply'\n    },\n\n    onshoworigin: {\n      type: 'toggle',\n      selector: '.show-origin'\n    },\n\n    title: '[data-hook=editor-title]',\n    language: '[data-hook=editor-language]'\n  },\n\n  events: {\n    'click [name=show-origin]': '_showOrigin',\n    'click [name=\"cancel\"]': '_cancel',\n    'click [name=\"apply\"]': '_apply'\n  },\n\n  _showOrigin: function() {\n    var fn = this.onshoworigin;\n    if (typeof fn === 'function') fn();\n  },\n\n  setPristine: function() {\n    if (this.original != this.script) this.original = this.script;\n    return this;\n  },\n\n  _cleanup: function() {\n    delete this._cache.changed;\n    delete this._cache.original;\n\n    if (typeof this.onvalidchange === 'function') {\n      this.unset('onvalidchange');\n    }\n    if (typeof this.validator === 'function') {\n      this.unset('validator');\n    }\n\n    return this;\n  },\n\n  validateScript: function(script) {\n    var validator = this.validator;\n    if (typeof validator === 'function') {\n      return validator.call(this, script);\n    }\n  },\n\n  getErrors: function() {\n    return this.editor\n      .getSession()\n      .getAnnotations()\n      .filter(function (annotation) {\n        return annotation.type === 'error';\n      });\n  },\n\n  _cancel: function() {},\n\n  _apply: function() {\n    var view = this;\n    var editor = view.editor;\n    var str = editor.getValue();\n    if (typeof view.onapply === 'function') {\n      view.onapply(str);\n    }\n    view.set('script', str, {silent: true});\n    view.set('original', str, {silent: true});\n    delete view._cache.pristine;\n    view.trigger('change:pristine', view, view.script === view.original);\n  },\n\n  _makeEditor: function() {\n    var view = this;\n    var ace = window.ace;\n    if (view.editor) view.editor.destroy();\n\n    var hasAnnotations = ['javascript', 'css'].indexOf(view.language) > -1;\n    var editor = view.editor = ace.edit(view.query('.ace-editor'));\n\n    function changed() {\n      var errors = view.getErrors();\n      if (errors.length) {\n        return;\n      }\n\n      var str = editor.getValue();\n      if (view.autoApply && typeof view.onvalidchange === 'function' && view.script !== str) {\n        view.onvalidchange(str);\n      }\n      view.set('script', str, {silent: true});\n      delete view._cache.pristine;\n      view.trigger('change:pristine', view, view.script === view.original);\n    }\n\n    editor.$blockScrolling = Infinity;\n    editor.setTheme('ace/theme/monokai');\n    editor.setShowInvisibles();\n    editor.setFontSize(16);\n\n    if (view.language === 'javascript') {\n      var languageTools = ace.require('ace/ext/language_tools');\n      editor.setOptions({\n        enableBasicAutocompletion: true,\n        enableSnippets: true,\n        enableLiveAutocompletion: false\n      });\n      languageTools.addCompleter(canvasCompleter);\n    }\n\n    var session = editor.getSession();\n    session.setMode('ace/mode/' + view.language);\n    session.setUseSoftTabs(true);\n    session.setTabSize(2);\n    session.setUseWrapMode(true);\n\n    if (hasAnnotations) {\n      session.on('changeAnnotation', changed);\n    }\n    else {\n      session.on('change', changed);\n    }\n\n    editor.setValue(view.script || view.original || '');\n\n    return view;\n  },\n\n  render: function() {\n    View.prototype.render.apply(this, arguments);\n\n    this._makeEditor();\n\n    return this;\n  },\n\n  remove: function() {\n    this.editor.destroy();\n    return View.prototype.remove.apply(this, arguments);\n  }\n});\nmodule.exports = AceEditor;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./controller/ace-view.js\n// module id = 656\n// module chunks = 3","'use strict';\nmodule.exports = require('ampersand-view').extend({\n  autoRender: true,\n  template: '<canvas width=\"200\" height=\"200\"></canvas>',\n\n  session: {\n    lineWidth: ['number', true, 1],\n    width: ['number', true, 200],\n    height: ['number', true, 200],\n    padding: ['number', true, 2],\n    color: ['string', true, '#000']\n  },\n\n  bindings: {\n    width: {\n      type: 'attribute',\n      name: 'width'\n    },\n    height: {\n      type: 'attribute',\n      name: 'height'\n    }\n  },\n\n  derived: {\n    ctx: {\n      deps: ['el', 'width', 'height'],\n      fn: function() {\n        return this.el.getContext('2d');\n      }\n    }\n  },\n\n  drawScales: function(/*bufferLength*/) {\n    var ctx = this.ctx;\n    var x = ctx.canvas.width * 0.5;\n    var y = ((ctx.canvas.height - 30) * 0.5) + 15;\n    var r = Math.min(x, y) - 30;\n    var rad = (Math.PI * 2);\n\n    ctx.font = '10px monospace';\n    ctx.fillStyle = ctx.strokeStyle = this.color;\n    var i, a, ax, ay, bx, by, lx, ly, ca, sa;\n    ctx.globalAlpha = 0.5;\n    for (i = 0; i < 360; i += 15) {\n      a = ((rad / 360) * i) - Math.PI;\n      ca = Math.cos(a);\n      sa = Math.sin(a);\n      ax = Math.round(x + (ca * (r / 10)));\n      ay = Math.round(y + (sa * (r / 10)));\n      bx = Math.round(x + (ca * (r - 5)));\n      by = Math.round(y + (sa * (r - 5)));\n      lx = Math.round(x + (ca * r));\n      ly = Math.round(y + (sa * r));\n\n      ctx.beginPath();\n      ctx.moveTo(ax, ay);\n      ctx.lineTo(bx, by);\n\n      ctx.textAlign = 'center';\n      if (lx < x) {\n        ctx.textAlign = 'right';\n      }\n      else if (lx > x) {\n        ctx.textAlign = 'left';\n      }\n\n      ctx.textBaseline = 'middle';\n      if (ly < y) {\n        ctx.textBaseline = 'bottom';\n      }\n      else if (ly > y) {\n        ctx.textBaseline = 'top';\n      }\n      ctx.globalAlpha = 1;\n      ctx.fillText(i, lx, ly);\n      ctx.globalAlpha = 0.5;\n\n      ctx.stroke();\n      ctx.closePath();\n    }\n    ctx.globalAlpha = 1;\n\n    return this;\n  },\n\n  update: function() {\n    if (!this.el) {\n      return this;\n    }\n\n    var source = this.parent;\n\n    var ctx = this.ctx;\n    var width = ctx.canvas.width;\n    var height = ctx.canvas.height;\n    ctx.clearRect(0, 0, width, height);\n    ctx.fillStyle = ctx.strokeStyle = this.color;\n\n    var analyser = source.parent.audioAnalyser;\n    var bufferLength = analyser.frequencyBinCount;\n    this.drawScales(bufferLength);\n\n    var freqArray = source.parent.audioFrequencyArray;\n    analyser.getByteFrequencyData(freqArray);\n\n    var timeDomainArray = source.parent.audioTimeDomainArray;\n    analyser.getByteTimeDomainData(timeDomainArray);\n\n    var x = width * 0.5;\n    var y = ((height - 30) * 0.5) + 15;\n    var r = Math.min(x, y) - 30;\n    var rad = Math.PI * 2;\n\n    ctx.font = '13px monospace';\n    ctx.textAlign = 'center';\n\n\n    var i, a, f, td, lx, ly, val, min = 0, max = 0, avg = 0;\n    ctx.strokeStyle = ctx.fillStyle = '#A581FF';\n    ctx.beginPath();\n    for (i = 0; i < bufferLength; i++) {\n      val = freqArray[i];\n      avg += val;\n      min = Math.min(min, val);\n      max = Math.max(max, val);\n\n      a = ((rad / bufferLength) * i) - Math.PI;\n      f = (r / 100) * (val * 0.5);\n      lx = Math.round(x + Math.cos(a) * f);\n      ly = Math.round(y + Math.sin(a) * f);\n      ctx.lineTo(lx, ly);\n    }\n    ctx.stroke();\n    ctx.textBaseline = 'top';\n    ctx.fillText(min.toFixed(2) + ' - ' + max.toFixed(2) + ' | ' + (avg / bufferLength).toFixed(2), x, 0);\n\n\n\n    min = 0;\n    max = 0;\n    avg = 0;\n    ctx.strokeStyle = ctx.fillStyle = '#66D9EF';\n    ctx.beginPath();\n    for (i = 0; i < bufferLength; i++) {\n      val = timeDomainArray[i];\n      avg += val;\n      min = Math.min(min, val);\n      max = Math.max(max, val);\n\n      a = ((rad / bufferLength) * i) - Math.PI;\n      td = (r / 100) * (val * 0.5);\n      lx = Math.round(x + Math.cos(a) * td);\n      ly = Math.round(y + Math.sin(a) * td);\n      ctx.lineTo(lx, ly);\n    }\n    ctx.stroke();\n    ctx.textBaseline = 'bottom';\n    ctx.fillText(min.toFixed(2) + ' - ' + max.toFixed(2) + ' | ' + (avg / bufferLength).toFixed(2), x, height);\n\n    return this;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./controller/audio-monitor-view.js\n// module id = 657\n// module chunks = 3","'use strict';\nvar View = require('./control-view');\nvar AudioMonitor = require('./audio-monitor-view');\nvar AudioSource = View.extend({\n  autoRender: true,\n\n  // need to investigate min/max value for decibels:\n  // https://webaudio.github.io/web-audio-api/#widl-AnalyserNode-maxDecibels\n  template: `\n    <div class=\"column rows audio-source\">\n      <!-- <audio class=\"row\" src=\"http://localhost:8080/stream\" controls autoplay></audio> -->\n      <div class=\"row columns\">\n        <div class=\"column audio-monitor\"></div>\n        <div class=\"column audio-controls\">\n          <label>MinDb: <input type=\"range\" name=\"minDecibels\" value=\"-90\" min=\"-200\" max=\"-11\" step=\"1\" /></label>\n          <label>MaxDb: <input type=\"range\" name=\"maxDecibels\" value=\"-10\" min=\"-70\" max=\"120\" step=\"1\" /></label>\n          <label>Smoothing: <input type=\"range\" name=\"smoothingTimeConstant\" min=\"0\" max=\"1\" value=\"0.85\" step=\"0.01\" /></label>\n          <label>FftSize: <select type=\"number\" name=\"fftSize\" value=\"32\" step=\"2\">\n            <option value=\"32\">32</option>\n            <option value=\"64\">64</option>\n            <option value=\"128\">128</option>\n            <option value=\"256\">256</option>\n            <option value=\"1024\">1024</option>\n            <option value=\"2048\">2048</option>\n          </select></label>\n        </div>\n      </div>\n    </div>\n  `,\n\n  initialize: function() {\n    this.listenToAndRun(this, 'change:audioContext change:audioAnalyser', this.connectAudioSource);\n  },\n\n  // session: {\n  //   minDecibels: ['number', true, -90],\n  //   maxDecibels: ['number', true, -10],\n  //   smoothingTimeConstant: ['number', true, 0.85],\n  //   fftSize: ['number', true, 256],\n  //   audioAnalyser: 'any'\n  // },\n\n  bindings: {\n    'parent.minDecibels': {\n      selector: '[name=\"minDecibels\"]',\n      type: 'value'\n    },\n    'parent.maxDecibels': {\n      selector: '[name=\"maxDecibels\"]',\n      type: 'value'\n    },\n    'parent.smoothingTimeConstant': {\n      selector: '[name=\"smoothingTimeConstant\"]',\n      type: 'value'\n    },\n    'parent.fftSize': {\n      selector: '[name=\"fftSize\"]',\n      type: 'value'\n    }\n  },\n\n  session: {\n    color: 'string'\n  },\n\n  subviews: {\n    monitor: {\n      waitFor: 'el',\n      selector: '.audio-monitor',\n      prepareView: function(el) {\n        var view = new AudioMonitor({\n          color: this.color,\n          audioAnalyser: this.parent.audioAnalyser,\n          parent: this\n        });\n        el.appendChild(view.el);\n        return view;\n      }\n    }\n  },\n\n\n  events: {\n    'change .audio-source [name]': '_changeAudioParams'\n  },\n\n  connectAudioSource: function() {\n    var view = this;\n    var capture = {\n      audio: true\n    };\n\n    function success(stream) {\n      var source = view.parent.audioContext.createMediaStreamSource(stream);\n      source.connect(view.parent.audioAnalyser);\n    }\n    function error(err) {\n      console.warn(err);\n    }\n\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia(capture).then(success).catch(error);\n    }\n    else if (navigator.getUserMedia) {\n      navigator.getUserMedia(capture, success, error);\n    }\n\n    return this;\n  },\n\n  _changeAudioParams: function(evt) {\n    this.parent.set(evt.target.name, Number(evt.target.value));\n  },\n\n  update: function() {\n    if (!this.monitor) return;\n    this.monitor.update();\n  }\n});\nmodule.exports = AudioSource;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./controller/audio-source-view.js\n// module id = 658\n// module chunks = 3","'use strict';\nvar View = require('ampersand-view');\n\nvar ControlScreenControls = View.extend({\n  template: `<div class=\"column columns control-screen-controls\">\n    <div class=\"column no-grow\">\n      <button name=\"control-screen\">Control screen</button>\n    </div>\n\n    <div class=\"column no-grow columns control-screen-size\">\n      <div class=\"column\">\n        <input type=\"number\" min=\"25\" max=\"75\" name=\"control-screen-width\" />\n      </div>\n\n      <div class=\"column\">\n        <input type=\"number\" min=\"25\" max=\"75\" name=\"control-screen-height\" />\n      </div>\n    </div>\n  </div>`,\n\n  props: {\n    active: ['boolean', true, true],\n    width: ['number', true, 33],\n    height: ['number', true, 33],\n  },\n\n  bindings: {\n    'width': {type: 'value', selector: '[name=\"control-screen-width\"]'},\n    'height': {type: 'value', selector: '[name=\"control-screen-height\"]'}\n  },\n\n  events: {\n    'click [name=\"control-screen\"]': 'toggleActive',\n    'change [name=\"control-screen-width\"]': 'setWidth',\n    'change [name=\"control-screen-height\"]': 'setHeight'\n  },\n\n  toggleActive: function() {\n    this.toggle('active');\n  },\n\n  setWidth: function(evt) {\n    this.width = Number(evt.target.value);\n  },\n\n  setHeight: function(evt) {\n    this.height = Number(evt.target.value);\n  }\n});\nmodule.exports = ControlScreenControls;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./controller/control-screen-controls-view.js\n// module id = 659\n// module chunks = 3","/* global Request */\n'use strict';\nvar View = require('./control-view');\nvar jsYAML = require('js-yaml');\n\nfunction resToJSON(res) {\n  return res.json();\n}\n\nfunction toObj(arr) {\n  var obj = {};\n  arr.forEach(function(o) {\n    obj[o.name] = o;\n    delete obj[o.name].name;\n  });\n  return obj;\n}\n\nfunction toArr(obj) {\n  var keys = Object.keys(obj);\n  return keys.map(function(key) {\n    obj[key].name = key;\n    return obj[key];\n  });\n}\n\n\nvar GistView = View.extend({\n  template: `\n    <div class=\"columns\">\n      <div class=\"column\"><input placeholder=\"Gist ID\" name=\"gist-id\"/></div>\n      <div class=\"column no-grow\"><button name=\"save-gist\">Save gist</button></div>\n      <a target=\"_blank\">Open on GH</a>\n    </div>\n  `,\n\n  events: {\n    'change [name=\"gist-id\"]': '_loadGist',\n    'click [name=\"save-gist\"]': '_saveGist'\n  },\n\n  session: {\n    gistId: 'string',\n    revision: 'any'\n  },\n\n  derived: {\n    url: {\n      deps: ['gistId'],\n      fn: function() {\n        return this.gistId ? 'https://gist.github.com/' + this.gistId : false;\n      }\n    }\n  },\n\n  bindings: {\n    gistId: [\n      {\n        type: 'value',\n        selector: '[name=\"gist-id\"]'\n      }\n    ],\n    url: [\n      {\n        type: 'attribute',\n        name: 'href',\n        selector: 'a'\n      },\n      {\n        type: 'toggle',\n        selector: 'a'\n      }\n    ]\n  },\n\n  _loadGist: function(done) {\n    var view = this;\n    if (!view.gistId) return done(new Error('No Gist ID'));\n    done = typeof done === 'function' ? done : function(err) { console.error('gist loading error', err.message); };\n\n    fetch('https://api.github.com/gists/' + view.gistId)\n      .then(resToJSON)\n      .then(function(json) {\n        var content = json.files['visual-fiha-setup.yml'].content;\n        done(null, view.fromYaml(content));\n      }, done)\n      .catch(done);\n  },\n\n  fromYaml: function(newStr) {\n    var obj = {};\n    try {\n      obj = jsYAML.safeLoad(newStr);\n      obj.signals = toArr(obj.signals || {});\n      obj.layers = toArr(obj.layers || {});\n      obj.mappings = toArr(obj.mappings || {});\n    }\n    catch(e) {\n      console.warn(e);\n    }\n    return obj;\n  },\n\n  toYaml: function() {\n    var setup = this.parent.toJSON();\n    setup.signals = toObj(setup.signals || []);\n    setup.layers = toObj(setup.layers || []);\n    setup.mappings = toObj(setup.mappings || []);\n    return jsYAML.safeDump(JSON.parse(JSON.stringify(setup)));\n  },\n\n  _saveGist: function(evt) {\n    console.info('_saveGist');\n    evt.preventDefault();\n    var method = 'POST';\n    var url = 'https://api.github.com/gists';\n    var view = this;\n\n    // we can't update an anonymous gist... :/\n    // var id = this.gistId;\n    // if (id) {\n    //   url += '/' + id;\n    //   method = 'PATCH';\n    // }\n\n    var req = new Request(url, {\n      method: method,\n      body: JSON.stringify({\n        description: 'This gist is a setup information for https://zeropaper.github.io/visual-fiha',\n        public: true,\n        files: {\n          'visual-fiha-setup.yml': {\n            content: view.toYaml()\n          }\n        }\n      })\n    });\n\n    fetch(req)\n      .then(resToJSON)\n      .then(function(json) {\n        view.gistId = json.id;\n      });\n  }\n});\nmodule.exports = GistView;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./controller/gist-view.js\n// module id = 660\n// module chunks = 3","'use strict';\n\nvar localForage = require('./../storage');\n\nvar View = require('ampersand-view');\nvar LocalforageView = View.extend({\n  template: `\n    <div class=\"columns localforage-view\">\n      <div class=\"column columns no-grow\">\n        <div class=\"column\"><button name=\"snapshot-save\" title=\"Take snapshot\">Snapshot</button></div>\n        <div class=\"column\"><button name=\"snapshot-restore\" class=\"vfi-ccw\" title=\"Restore snapshot\"></button></div>\n      </div>\n      <div class=\"column columns\">\n        <div class=\"column\"><input placeholder=\"Local ID\" name=\"local-id\"/></div>\n        <div class=\"column no-grow\"><button name=\"save\">Save</button></div>\n        <div class=\"column\"><button name=\"restore\" class=\"vfi-ccw\" title=\"Reload\"></button></div>\n      </div>\n    </div>\n  `,\n  events: {\n    'focus [name=local-id]': '_suggestKeys',\n    'click [name=snapshot-restore]': '_restoreSnapshot',\n    'click [name=snapshot-save]': '_saveSnapshot',\n    'click [name=restore]': '_restoreSetup',\n    'click [name=save]': '_saveSetup'\n  },\n  _suggestKeys: function(evt) {\n    var helper = this.parent.suggestionHelper;\n    localForage.keys().then(function(keys) {\n\n      helper\n        .attach(evt.target, function(selected) {\n          evt.target.value = selected;\n          helper.detach();\n        })\n        .fill(keys.map(s => s.replace('local-', '')));\n    });\n  },\n  loadLocal: function(setupId, done) {\n    done = typeof done === 'function' ? done : function(err) { if(err) console.error('localforage error', err.message); };\n    return localForage.getItem(setupId)\n            .then(function(setup) {\n              done(null, setup);\n            }, done)\n            .catch(done);\n  },\n  saveLocal: function(setupId, done) {\n    done = typeof done === 'function' ? done : function(err) { if(err) console.error('localforage error', err.message); };\n    return localForage.setItem(setupId, this.parent.toJSON())\n            .then(function() {\n              done();\n            }, done)\n            .catch(done);\n  },\n  _restoreSnapshot: function() {\n    var controlView = this.parent;\n    this.loadLocal('snapshot', function(err, setup) {\n      if (err) throw err;\n      controlView.fromJSON(setup);\n    });\n  },\n  _saveSnapshot: function() {\n    this.saveLocal('snapshot', function(err) {\n      if (err) throw err;\n    });\n  },\n  _restoreSetup: function() {\n    var controlView = this.parent;\n    var id = 'local-' + this.query('[name=local-id]').value;\n    this.loadLocal(id, function(err, setup) {\n      if (err) throw err;\n      controlView.fromJSON(setup);\n      controlView._setupEditor();\n    });\n  },\n  _saveSetup: function() {\n    var id = 'local-' + this.query('[name=local-id]').value;\n    this.saveLocal(id, function() {\n      console.info('saved setup to local storage as ' + id);\n    });\n  }\n});\nmodule.exports = LocalforageView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./controller/localforage-view.js\n// module id = 661\n// module chunks = 3","'use strict';\nvar assign = require('lodash.assign');\nvar View = require('./control-view');\nvar objectPath = require('./../object-path');\n\nvar PropertyView = View.extend({\n  template: `\n    <div class=\"columns object-prop prop-type-default\">\n      <div class=\"column gutter text-right prop-name\"></div>\n      <div class=\"column no-grow prop-value-reset\">\n        <button class=\"vfi-cancel\"></button>\n      </div>\n      <div class=\"column prop-value\">\n        <input name=\"value\" type=\"text\" />\n      </div>\n      <div class=\"column prop-mapping-clear no-grow\">\n        <button class=\"vfi-unlink\"></button>\n      </div>\n      <div class=\"column prop-mapping-name\">\n        <input name=\"mapping-name\" type=\"text\" />\n      </div>\n      <div class=\"column no-grow\">\n        <button class=\"mapping-details\"></button>\n      </div>\n    </div>\n  `,\n\n  initialize: function() {\n    View.prototype.initialize.apply(this, arguments);\n\n    this.listenToAndRun(this.parent.model, 'change:' + this.model.name, function() {\n      this.trigger('change:model', this.model);\n    });\n  },\n\n  derived: {\n    suggestionHelper: {\n      cache: false,\n      fn: function() {\n        var view = this.parent;\n        while (view) {\n          if (view.suggestionHelper) return view.suggestionHelper;\n          view = view.parent;\n        }\n        return false;\n      }\n    },\n\n    value: {\n      deps: [\n        'model',\n        'model.name',\n        'parent.model'\n      ],\n      fn: function() {\n        return this.parent.model.get(this.model.name);\n      }\n    },\n\n    propertyPath: {\n      deps: [],\n      fn: function() {\n        return this.parent.modelPath + '.' + this.model.name;\n      }\n    },\n\n    mapping: {\n      deps: [],\n      fn: function() {\n        return this.rootView.mappings.findMappingByTarget(this.propertyPath);\n      }\n    }\n  },\n\n  bindings: {\n    'model.name': {\n      type: 'text',\n      selector: '.prop-name'\n    },\n\n    value: {\n      type: function(el, val) {\n        if (el === document.activeElement) return;\n        el.value = val;\n      },\n      selector: 'input[name=value]',\n    },\n\n    'mapping.name': [\n      {\n        type: 'booleanAttribute',\n        selector: '.prop-mapping-clear button',\n        name: 'disabled',\n        invert: true\n      },\n      {\n        type: 'value',\n        selector: '[name=\"mapping-name\"]'\n      },\n      {\n        type: 'booleanClass',\n        selector: '.mapping-details',\n        yes: 'vfi-eye',\n        no: 'vfi-eye-off'\n      },\n      {\n        type: 'booleanAttribute',\n        selector: '.mapping-details',\n        name: 'disabled',\n        invert: true\n      },\n      {\n        type: 'booleanAttribute',\n        selector: '.prop-value-reset button',\n        name: 'disabled'\n      }\n    ]\n  },\n\n  commands: {\n    'click .prop-mapping-clear button': 'updateMapping _handleRemoveMappingTarget',\n    'change [name=\"value\"]': 'propChange _handleChange',\n    // 'click .prop-value-reset button': 'resetProp _handleReset',\n  },\n\n  _handleRemoveMappingTarget: function() {\n    var propertyPath = this.propertyPath;\n    var mapping = this.mapping.serialize();\n    mapping.targets = mapping.targets.filter(function(target) {\n      return target !== propertyPath;\n    });\n    return {mapping: mapping};\n  },\n\n  _handleChange: function() {\n    var parent = this.model.collection.parent.model;\n    return {\n      path: parent.modelPath || objectPath(parent),\n      property: this.model.name,\n      value: this.query('[name=\"value\"]').value\n    };\n  },\n\n  // _handleReset: function() {\n  //   this.parent.model.unset(this.model.name);\n  // },\n\n  events: {\n    'focus [name=\"mapping-name\"]': '_suggestMapping',\n    'focus [type=\"text\"][name=\"value\"]': '_suggestValues',\n    'click button.mapping-details': '_showMapping'\n  },\n\n  _suggestMapping: function(evt) {\n    var view = this;\n    var helper = view.suggestionHelper;\n    var mappings = this.rootView.mappings;\n    var propertyPath = this.propertyPath;\n\n    helper.attach(evt.target, function(selected) {\n      var mappingState = mappings.get(selected);\n      if (!mappingState) return;\n      var mapping = mappingState.serialize();\n      mapping.targets.push(propertyPath);\n      view.sendCommand('updateMapping', {\n        mapping: mapping\n      });\n      helper.detach();\n    }).fill(mappings.map(function(state) { return state.name; }));\n  },\n\n  _suggestValues: function(evt) {\n    var view = this;\n    var helper = view.suggestionHelper;\n    if (!helper || !view.model.values || !view.model.values.length) return;\n\n    var model = view.model;\n    var parent = model.collection.parent.model;\n    var el = evt.target;\n    helper.attach(el, function(selected) {\n      // console.info('set %s . %s = %s', objectPath(parent), model.name, selected, el.value !== selected);\n\n      view.sendCommand('propChange', {\n        path: objectPath(parent),\n        property: model.name,\n        value: selected\n      });\n\n      el.value = selected;\n      helper.detach();\n    }).fill(model.values);\n  },\n\n  _showMapping: function() {\n    var mapping = this.mapping;\n    var rootView = this.rootView;\n    rootView.regionRight.focusTab('Mappings');\n    rootView.mappingsView.mappingsList.views.forEach(function(view) {\n      if (view.model === mapping) {\n        view.el.scrollIntoView();\n        view.blink();\n      }\n    });\n  }\n});\n\n\n\nPropertyView.types = {};\n\nPropertyView.types.boolean = PropertyView.extend({\n  template: `\n    <div class=\"columns object-prop prop-type-boolean\">\n      <div class=\"column gutter text-right prop-name\"></div>\n      <div class=\"column no-grow prop-value-reset\">\n        <button class=\"vfi-cancel\"></button>\n      </div>\n      <div class=\"column prop-value\">\n        <button class=\"prop-toggle-btn\"></button>\n      </div>\n      <div class=\"column prop-mapping-clear no-grow\">\n        <button class=\"vfi-unlink\"></button>\n      </div>\n      <div class=\"column prop-mapping-name\">\n        <input name=\"mapping-name\" type=\"text\" />\n      </div>\n      <div class=\"column no-grow\">\n        <button class=\"mapping-details\"></button>\n      </div>\n    </div>\n  `,\n\n  bindings: assign({}, PropertyView.prototype.bindings, {\n    value: {\n      selector: 'button.prop-toggle-btn',\n      type: 'booleanClass',\n      yes: 'vfi-toggle-on',\n      no: 'vfi-toggle-off'\n    }\n  }),\n\n  events: {\n    'focus [name=\"mapping-name\"]': '_suggestMapping',\n    'click button.prop-toggle-btn': '_handleChange'\n  },\n\n  _handleChange: function() {\n    var parent = this.model.collection.parent.model;\n    this.sendCommand('propChange', {\n      path: objectPath(parent),\n      property: this.model.name,\n      value: !parent[this.model.name]\n    });\n  }\n});\n\nPropertyView.types.number = PropertyView.extend({\n  template: `\n    <div class=\"columns object-prop prop-type-number\">\n      <div class=\"column gutter text-right prop-name\"></div>\n      <div class=\"column no-grow prop-value-reset\">\n        <button class=\"vfi-cancel\"></button>\n      </div>\n      <div class=\"column prop-value\">\n        <input name=\"value\" type=\"number\" />\n      </div>\n      <div class=\"column prop-mapping-clear no-grow\">\n        <button class=\"vfi-unlink\"></button>\n      </div>\n      <div class=\"column prop-mapping-name\">\n        <input name=\"mapping-name\" type=\"text\" />\n      </div>\n      <div class=\"column no-grow\">\n        <button class=\"mapping-details\"></button>\n      </div>\n    </div>\n  `,\n\n  bindings: assign({}, PropertyView.prototype.bindings, {\n    min: [\n      {\n        selector: '[name=value]',\n        type: function(el, val) {\n          if (val !== null && typeof val !== 'undefined') {\n            el.setAttribute('min', val);\n          }\n          else {\n            el.removeAttribute('min');\n          }\n        }\n      }\n    ],\n    max: [\n      {\n        selector: '[name=value]',\n        type: function(el, val) {\n          if (val !== null && typeof val !== 'undefined') {\n            el.setAttribute('max', val);\n          }\n          else {\n            el.removeAttribute('max');\n          }\n        }\n      }\n    ],\n  }),\n\n  session: {\n    min: ['number', false, null],\n    max: ['number', false, null]\n  },\n\n  _handleChange: function() {\n    var payload = PropertyView.prototype._handleChange.apply(this, arguments);\n    payload.value = Number(payload.value);\n    return payload;\n  }\n});\n\n\n\n\n\n\n\n\n\nPropertyView.names = {};\n\nPropertyView.names.active = PropertyView.types.boolean.extend({});\n\nPropertyView.names.opacity = PropertyView.types.number.extend({\n  session: {\n    min: ['number', false, 0],\n    max: ['number', false, 100]\n  }\n});\n\nPropertyView.names.skewX =\nPropertyView.names.skewY =\nPropertyView.names.rotateX =\nPropertyView.names.rotateY =\nPropertyView.names.rotateZ = PropertyView.types.number.extend({\n  session: {\n    min: ['number', false, -360],\n    max: ['number', false, 360]\n  }\n});\n\nmodule.exports = PropertyView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./controller/property-view.js\n// module id = 662\n// module chunks = 3","'use strict';\nvar State = require('ampersand-state');\n// var View = require('./control-view');\nvar View = require('ampersand-view');\nvar Collection = require('ampersand-collection');\nvar ViewSwitcher = require('ampersand-view-switcher');\n\nvar TabView = View.extend({\n  template: '<li class=\"columns\">' +\n    '<div class=\"column gutter name\"></div>' +\n    '<div class=\"column no-grow\">' +\n      '<button class=\"vfi-minus-squared-alt\"></button>' +\n    '</div>' +\n  '</li>',\n\n  bindings: {\n    'model.name': '.name',\n    'model.active': {type: 'booleanClass', name: 'active'},\n    'model.pinned': {type: 'toggle', selector: 'button', invert: true}\n  },\n\n  events: {\n    'click .name': 'selectTab',\n    'click button': 'closeTab'\n  },\n\n  selectTab: function() {\n    var itemView = this;\n    var item = itemView.model;\n    itemView.parent._focus(item);\n  },\n\n  closeTab: function() {\n    this.parent.focusTabIndex(0);\n    this.model.collection.remove(this.model);\n  }\n});\n\nvar RegionView = View.extend({\n  collections: {\n    tabs: Collection.extend({\n      mainIndex: 'name',\n\n      find: function(fn) {\n        for (var i = 0; i < this.length; i++) {\n          if (fn(this.models[i])) return this.models[i];\n        }\n      },\n\n      model: State.extend({\n        idAttribute: 'name',\n\n        session: {\n          pinned: 'boolean',\n          active: 'boolean',\n          name: 'string',\n          view: 'state',\n          rebuild: 'any'\n        }\n      })\n    })\n  },\n\n  autoRender: true,\n\n  template: '<div class=\"region\">' +\n              '<ul class=\"region-tabs tabs\"></ul>'+\n              '<div class=\"region-content\"></div>' +\n            '</div>',\n\n  activeIndex: function() {\n    if (!this.tabs.models.length) return -2;\n    for (var i = 0; i < this.tabs.models.length; i++) {\n      if (this.tabs.models[i].active) return i;\n    }\n    return -1;\n  },\n\n  render: function() {\n    if (this.rendered) return this;\n\n    View.prototype.render.apply(this, arguments);\n\n    this.regionSwitcher = new ViewSwitcher(this.query('.region-content'), {});\n\n    this.renderCollection(this.tabs, TabView, '.region-tabs');\n\n    this.listenToAndRun(this.tabs, 'reset add remove', function() {\n      var activeIndex = this.activeIndex();\n      if (activeIndex > -2) {\n        this.focusTabIndex(activeIndex > -1 ? activeIndex : 0);\n      }\n    });\n\n    return this;\n  },\n\n  _setView: function(view) {\n    if (!view) return;\n    this.regionSwitcher.set(view);\n    return view;\n  },\n\n  _focus: function(tabState) {\n    if (!tabState) return;\n    this.tabs.forEach(function(state) {\n      state.active = tabState === state;\n    });\n\n    var view = tabState.view;\n    if (typeof tabState.rebuild === 'function') {\n      view = tabState.rebuild();\n    }\n    if (typeof tabState.Constructor === 'function') {\n      view = new tabState.Constructor({\n        parent: this\n      });\n\n    }\n    // else {\n    //   view.trigger('change:model', view, view.model, {});\n    //   view.trigger('change', view, view, {});\n    //   var bindings = view.constructor.prototype.bindings || {};\n    //   Object.keys(bindings).forEach(function(key) {\n    //     view.trigger('change:' + key);\n    //   }, view);\n    // }\n    this._setView(view);\n  },\n\n  focusTabIndex: function(index) {\n    this._focus(this.tabs.at(index));\n  },\n\n  focusTab: function(name) {\n    this._focus(this.tabs.get(name));\n  }\n});\n\nmodule.exports = RegionView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./controller/region-view.js\n// module id = 663\n// module chunks = 3","'use strict';\n// var View = require('./control-view');\nvar View = require('ampersand-view');\nvar Collection = require('ampersand-collection');\nvar State = require('ampersand-state');\n\nfunction sharedStart(array) {\n  var A = array.concat().sort(),\n      a1 = A[0],\n      a2 = A[A.length-1],\n      L = a1.length,\n      i = 0;\n  while(i < L && a1.charAt(i) === a2.charAt(i)) i++;\n  return a1.substring(0, i);\n}\n\nvar SuggestionItem = View.extend({\n  template: '<li></li>',\n  derived: {\n    shortText: {\n      deps: ['model.text', 'model.collection.parent'],\n      fn: function() {\n        return this.model.text.substring(this.model.collection.parent.commonStart.length);\n      }\n    }\n  },\n  bindings: {\n    'model.active': {type: 'booleanClass', name: 'active'},\n    shortText: {type: 'text'}\n  },\n  events: {\n    click: '_handleClick'\n  },\n  _handleClick: function (evt) {\n    evt.preventDefault();\n    this.parent.trigger('selected', this.model.value || this.model.text);\n  }\n});\n\nvar SuggestionView = View.extend({\n  autoRender: true,\n\n  attach: function (el, selectCb, newCollection) {\n    this.inputEl = typeof el === 'string' ? this.parent.query(el) : el;\n    selectCb = selectCb || function(selected) { this.inputEl.value = selected; this.detach(); }.bind(this);\n    this.off('selected');\n    this.once('selected', selectCb);\n\n    this._makeHintEl();\n\n    if (newCollection) {\n      if (newCollection.isCollection) {\n        this.collection = newCollection;\n      }\n      else {\n        this.collection.reset(newCollection);\n      }\n    }\n\n    this.filterCollection();\n\n    return this;\n  },\n\n  fill: function (arr) {\n    arr = typeof arr === 'function' ? arr(this.inputEl.value) : arr;\n    this.collection.reset(arr.map(function (v) { return {text:v}; }));\n    return this.filterCollection();\n  },\n\n  detach: function (done) {\n    done = done || function(){};\n    this._removeHintEl();\n    this.off('selected');\n    this.unset('inputEl');\n    this.collection.reset([]);\n    done();\n    return this;\n  },\n\n  filterCollection: function () {\n    var update = [];\n    if (!this.inputEl) {\n      update = this.collection.models;\n    }\n    else {\n      var inputElVal = this.inputEl.value || this.inputEl.value;\n\n      if (!inputElVal) {\n        update = this.collection.models;\n      }\n      else {\n        update = this.collection.filter(function (suggestion) {\n          return suggestion.text.indexOf(inputElVal) === 0;\n        });\n      }\n    }\n\n    if (update.length > 1) {\n      this.commonStart = sharedStart(update.map(function(state) { return state.text; }));\n    }\n    else if (update.length/* === 1*/) {\n      this.commonStart = update[0].text;\n      if (this.commonStart === this.inputEl.value) {\n        update = [];\n      }\n    }\n    else {\n      this.commonStart = '';\n      update = [];\n    }\n    this.suggestions.reset(update);\n    this.hasSuggestions = !!update.length;\n    if (this.hasSuggestions) this.suggestions.at(0).toggle('active');\n    return this;\n  },\n\n  derived: {\n    // creates an event listener with correct scope (ideal for add/removeEventListener)\n    _handleHintClick: {\n      deps: [],\n      fn: function() {\n        var view = this;\n        return function() {\n          if (!view.inputEl || !view.commonStart) return;\n          view.inputEl.value = view.commonStart;\n        };\n      }\n    },\n    styles: {\n      deps:['inputEl'],\n      fn: function() {\n        if (!this.inputEl) return {};\n        return window.getComputedStyle(this.inputEl);\n      }\n    }\n  },\n\n  session: {\n    hasSuggestions: 'boolean',\n    commonStart: 'string',\n    inputEl: 'element'\n  },\n\n  bindings: {\n    hasSuggestions: {\n      type: 'toggle'\n    },\n    commonStart: {\n      type: function() {\n        var el = this.suggestionHint;\n        if (!el) return;\n        el.textContent = this.commonStart;\n      }\n    }\n  },\n\n  _handleInput: function(evt) {\n    var suggestions = this.suggestions;\n    var activeState = suggestions.filter(function(state) {\n      return state.active;\n    })[0];\n    var activeIndex = activeState ? suggestions.indexOf(activeState) : -1;\n    var inputElVal = this.inputEl.value;\n\n\n    if (evt.type === 'keydown') {\n      // that way, autocomplete can be done using the Tab keyup\n      if (evt.key === 'Tab' && this.commonStart !== inputElVal) {\n        evt.preventDefault();\n      }\n      else if (evt.key === 'Enter') {\n        if (this.items.views[activeIndex]) {\n          this.items.views[activeIndex]._handleClick(evt);\n        }\n        else {\n          this.trigger('selected', inputElVal);\n        }\n      }\n      return;\n    }\n\n    // keyup\n    switch (evt.key) {\n      case 'ArrowRight':\n      case 'Tab':\n        this._handleHintClick();\n        break;\n      case 'ArrowUp':\n      case 'ArrowDown':\n        activeIndex += evt.key === 'ArrowDown' ? 1 : -1;\n\n        if (activeIndex < 0) {\n          activeIndex = suggestions.length - 1;\n        }\n        else if (activeIndex >= suggestions.length) {\n          activeIndex = 0;\n        }\n\n        suggestions.forEach(function(state, index) {\n          state.active = index === activeIndex;\n        });\n\n        this.query('li.active').scrollIntoView();\n        break;\n      default:\n        this.filterCollection();\n    }\n  },\n\n  _makeHintEl: function() {\n    var parentNode = this.inputEl.parentNode;\n    if (!parentNode) return this;\n    this._removeHintEl();\n\n    var div = this.suggestionHint = document.createElement('div');\n    div.className = 'suggestion--hint';\n    [\n      'display',\n      'paddingTop',\n      'paddingBottom',\n      'paddingLeft',\n      'paddingRight',\n      'marginTop',\n      'marginBottom',\n      'marginLeft',\n      'marginRight',\n      'top',\n      'bottom',\n      'left',\n      'right',\n      'borderWidth',\n      'borderStyle',\n      'lineHeight',\n      'fontSize',\n      'fontFamily',\n      'textAlign',\n      'color'\n    ].forEach(function(copy) {\n      div.style[copy] = this.styles[copy];\n    }, this);\n\n    div.style.cursor = 'pointer';\n    div.style.pointerEvents = 'none';\n    div.style.borderColor = 'transparent';\n    div.style.position = 'absolute';\n    div.style.zIndex = this.styles.zIndex + 1;\n    div.style.opacity = 0.5;\n\n    parentNode.appendChild(div);\n    this.inputEl.addEventListener('click', this._handleHintClick);\n  },\n\n  _removeHintEl: function() {\n    if (!this.suggestionHint || !this.suggestionHint.parentNode) return this;\n\n    this.inputEl.removeEventListener('click', this._handleHintClick);\n    this.suggestionHint.parentNode.removeChild(this.suggestionHint);\n    this.suggestionHint = null;\n    return this;\n  },\n\n  resetPosition: function() {\n    var view = this;\n    if (!view.el || !view.el.parentNode || !view.inputEl) { return view; }\n    view.el.style.visibility = 'hidden';\n\n    setTimeout(function () {\n      if (!view.el || !view.el.parentNode || !view.inputEl) { return; }\n      var ipos = view.inputEl.getBoundingClientRect();\n      var bpos = view.el.getBoundingClientRect();\n\n      if (ipos.top > view.el.parentNode.clientHeight * 0.5) {\n        view.el.style.maxHeight = Math.min(ipos.top, view.el.parentNode.clientHeight * 0.33) + 'px';\n        view.el.style.top = ((ipos.top - view.el.clientHeight) - 3) + 'px';\n      }\n      else {\n        view.el.style.maxHeight = Math.min(ipos.bottom, view.el.parentNode.clientHeight * 0.33) + 'px';\n        view.el.style.top = (ipos.bottom + 3) + 'px';\n      }\n\n      var s = window.getComputedStyle(view.inputEl);\n      var exceed = view.el.parentNode && (bpos.left + bpos.width) > view.el.parentNode.clientWidth;\n      view.el.style.textAlign = s.textAlign;\n      if (s.textAlign === 'right' || exceed) {\n        view.el.style.left = (ipos.left - (bpos.width - ipos.width)) + 'px';\n      }\n      else {\n        view.el.style.left = (ipos.left) + 'px';\n      }\n\n      view.el.style.visibility = 'visible';\n    });\n\n    return view;\n  },\n\n  initialize: function () {\n    if (!this.parent) { throw new Error('Suggestion view need a parent view'); }\n\n    this.collection = this.collection || new Collection([], {parent: this});\n\n    this.on('change:collection', function () {\n      this.listenToAndRun(this.collection, 'add remove reset', this.filterCollection);\n    });\n\n    this.listenTo(this.suggestions, 'add remove reset', this.resetPosition);\n\n    var _handleInput = this._handleInput.bind(this);\n\n    this.on('change:inputEl', function() {\n      var previous = this.previousAttributes();\n      if (previous.inputEl) {\n        previous.inputEl.removeEventListener('keydown', _handleInput);\n        previous.inputEl.removeEventListener('keyup', _handleInput);\n      }\n\n      var list = this.el;\n      var holderEl = this.parent.el;\n      var inputEl = this.inputEl;\n\n      if (!inputEl) {\n        if (this.el && this.el.parentNode === holderEl) {\n          holderEl.removeChild(this.el);\n        }\n        return;\n      }\n\n      if (!list || !holderEl) { return; }\n      if (list.parentNode !== holderEl) {\n\n        var holderElStyle = window.getComputedStyle(holderEl);\n        if (holderElStyle.position === 'static') {\n          holderEl.style.position = 'relative';\n        }\n\n        holderEl.appendChild(list);\n      }\n\n      this.resetPosition();\n      inputEl.addEventListener('keydown', _handleInput, false);\n      inputEl.addEventListener('keyup', _handleInput, false);\n    });\n\n    var _handleHolderClick = function (evt) {\n      evt.preventDefault();\n      if (evt.target !== this.inputEl && !this.el.contains(evt.target)) {\n        this.detach();\n      }\n    }.bind(this);\n\n    this.listenToAndRun(this.parent, 'change:el', function() {\n      var previous = this.parent.previousAttributes();\n      if (previous.el) {\n        previous.el.removeEventListener('click', _handleHolderClick);\n      }\n      if (this.parent.el) {\n        this.parent.el.addEventListener('click', _handleHolderClick, false);\n      }\n    });\n  },\n\n  collections: {\n    suggestions: Collection.extend({\n      model: State.extend({\n        props: {\n          active: 'boolean',\n          text: ['string', true, ''],\n          value: ['any', false, null]\n        }\n      })\n    })\n  },\n\n  template: '<ul class=\"suggestion-view\"></ul>',\n\n  render: function () {\n    this.renderWithTemplate();\n\n    this.items = this.renderCollection(this.suggestions, SuggestionItem, this.el);\n\n    return this;\n  }\n});\nmodule.exports = SuggestionView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./controller/suggestion-view.js\n// module id = 664\n// module chunks = 3","'use strict';\n// http://plnkr.co/edit/6MVntVmXYUbjR0DI82Cr\n\nvar mockedCtx = require('./mocked-canvas-2d-context');\nvar ramda = require('ramda');\n\nvar entries = [].concat(mockedCtx._.properties, mockedCtx._.methods);\n\nObject.keys(ramda)\n  .filter(function(name) {\n    return name.length > 1 && typeof ramda[name] === 'function';\n  })\n  .forEach(function(name) {\n    entries.push(name);\n  });\n\n// https://gist.github.com/andrei-m/982927#gistcomment-1931258\nfunction levenshteinDistance(a, b) {\n  if (a.length === 0) return b.length;\n  if (b.length === 0) return a.length;\n  let tmp, i, j, prev, val, row;\n  // swap to save some memory O(min(a,b)) instead of O(a)\n  if (a.length > b.length) {\n    tmp = a;\n    a = b;\n    b = tmp;\n  }\n\n  row = Array(a.length + 1);\n  // init the row\n  for (i = 0; i <= a.length; i++) {\n    row[i] = i;\n  }\n\n  // fill in the rest\n  for (i = 1; i <= b.length; i++) {\n    prev = i;\n    for (j = 1; j <= a.length; j++) {\n      if (b[i-1] === a[j-1]) {\n        val = row[j-1]; // match\n      } else {\n        val = Math.min(row[j-1] + 1, // substitution\n              Math.min(prev + 1,     // insertion\n                       row[j] + 1));  // deletion\n      }\n      row[j - 1] = prev;\n      prev = val;\n    }\n    row[a.length] = prev;\n  }\n  return row[a.length];\n}\n\nvar canvasCompleter = {\n  getCompletions: function(editor, session, pos, prefix, callback) {\n    // if (!prefix.length) { return callback(null, []); }\n    // console.info('canvasCompleter', editor, session, prefix);\n\n    var filtered = entries\n      .filter(function(entry) {\n        // console.info('distance', prefix, entry, levenshteinDistance(prefix, entry));\n        return !prefix || entry.indexOf(prefix) > -1;\n      })\n      .map(function(entry) {\n        return {\n          name: entry,\n          value: entry + '()',\n          score: 1,\n          meta: 'livecode'\n        };\n      });\n\n    callback(null, filtered);\n  }\n};\nmodule.exports = canvasCompleter;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/canvas/canvas-completer.js\n// module id = 665\n// module chunks = 3","'use strict';\nvar LayerControlView = require('./../control-view');\nvar LayerDetailsView = require('./../details-view');\nvar assign = require('lodash.assign');\nvar objectPath = require('./../../object-path');\n\nvar CanvasLayerDetailsView = LayerDetailsView.extend({\n  template: `\n    <section>\n      <header>\n        <div class=\"columns\">\n          <h3 class=\"column\">Details for <span data-hook=\"name\"></span> <small>sublayer</small></h3>\n          <div class=\"column no-grow\"><button class=\"vfi-eye\" name=\"show-origin\"></button></div>\n        </div>\n        <h5 data-hook=\"object-path\"></h5>\n      </header>\n      <div class=\"row mappings props\"></div>\n    </section>\n  `\n});\n\nvar CanvasControlLayerView = LayerControlView.extend({\n  template: `\n    <section class=\"canvas-layer\">\n      <header class=\"columns\">\n        <div class=\"column no-grow\"><button name=\"active\"></button></div>\n        <div class=\"column no-grow\"><button class=\"edit-draw-function vfi-cog-alt\"></button></div>\n        <h3 class=\"column canvas-layer-name gutter-horizontal\" data-hook=\"name\"></h3>\n        <div class=\"column no-grow\"><button class=\"vfi-trash-empty\" name=\"remove-canvas-layer\"></button></div>\n      </header>\n    </section>\n  `,\n\n  events: {\n    'click .edit-draw-function': '_editDrawFunction',\n    'click .canvas-layer-name': '_showDetails'\n  },\n\n  commands: {\n    'click [name=remove-canvas-layer]': 'removeLayer _layerName',\n    'click [name=\"active\"]': 'propChange _toggleActive',\n  },\n\n  _editDrawFunction: function () {\n    var rootView = this.rootView;\n    var path = objectPath(this.model);\n    var editor = rootView.getEditor();\n\n    editor.editCode({\n      script: this.model.drawFunction || '',\n      language: 'javascript',\n      title: path + '.drawFunction',\n      onshoworigin: function() {\n        rootView.trigger('blink', path);\n      },\n      autoApply: true,\n      onvalidchange: function doneEditingCanvasDrawFunction(str) {\n        rootView.sendCommand('propChange', {\n          path: path,\n          property: 'drawFunction',\n          value: str\n        });\n      }\n    });\n  },\n\n  _showDetails: function () {\n    this.rootView.showDetails(new CanvasLayerDetailsView({\n      parent: this,\n      model: this.model\n    }));\n  },\n\n  bindings: {\n    'model.active': [\n      {\n        type: 'booleanClass',\n        name: 'disabled',\n        invert: true\n      },\n\n      {\n        type: 'booleanClass',\n        selector: '[name=\"active\"]',\n        yes: 'vfi-toggle-on',\n        no: 'vfi-toggle-off'\n      }\n    ],\n\n    drawFunction: '[data-hook=drawFunction]',\n    'model.name': '[data-hook=name]',\n    'model.duration': '[data-hook=duration]',\n    'model.fps': '[data-hook=fps]',\n    'model.frametime': '[data-hook=frametime]'\n  }\n});\n\nmodule.exports = LayerControlView.types.canvas = LayerControlView.extend({\n  template: `\n    <section class=\"row canvas-control\">\n      <header class=\"rows\">\n        <div class=\"row columns\">\n          <div class=\"column no-grow\"><button class=\"active prop-toggle\"></button></div>\n          <div class=\"column no-grow\"><button class=\"edit-css vfi-code\"></button></div>\n          <h3 class=\"column layer-name\" data-hook=\"name\"></h3>\n        </div>\n\n        <div class=\"row columns new-layer\">\n          <div class=\"column\"><input type=\"text\" placeholder=\"new-layer-name\" data-hook=\"new-layer-name\" /></div>\n          <div class=\"column\"><input type=\"text\" placeholder=\"propA, propB\" data-hook=\"new-layer-props\" /></div>\n          <div class=\"column no-grow\">\n            <button name=\"add-layer\" class=\"vfi-plus\"></button>\n          </div>\n        </div>\n      </header>\n\n      <div class=\"layers\">\n        <div class=\"items\"></div>\n      </div>\n    </section>\n  `,\n\n  events: assign({\n    'change [data-hook=new-layer-name]': '_inputLayerName',\n    'click [name=add-layer]': '_addLayer'\n  }, LayerControlView.prototype.events),\n\n  _inputLayerName: function() {\n    this.query('[name=add-layer]').disabled = !this.queryByHook('new-layer-name').value.trim();\n  },\n\n  _addLayer: function(evt) {\n    evt.preventDefault();\n    var nameEl = this.queryByHook('new-layer-name');\n    var name = nameEl.value.trim();\n    var propsEl = this.queryByHook('new-layer-props');\n    var propsVal = propsEl ? propsEl.value.split(',').map(function(s) { return s.trim(); }).filter(function(s) { return s; }) : [];\n\n    var props = {};\n    propsVal.forEach(function(prop) {\n      props[prop] = 'any';\n    });\n    var res = this.model.canvasLayers.add({\n      name: name,\n      drawFunction: 'function(ctx) {\\n  // ' + name + ' drawFunction\\n}',\n      props: props\n    });\n\n    if (!res) {\n      return;\n    }\n    nameEl.value = '';\n\n    this.rootView.sendCommand('propChange', {\n      path: objectPath(this.model),\n      property: 'canvasLayers',\n      value: this.model.canvasLayers.serialize()\n    });\n  },\n\n  initialize: function () {\n    LayerControlView.prototype.initialize.apply(this, arguments);\n    this.once('change:rendered', this._inputLayerName);\n  },\n\n\n  subviews: {\n    canvasLayersView: {\n      waitFor: 'el',\n      selector: '.layers .items',\n      prepareView: function (el) {\n        return this.renderCollection(this.model.canvasLayers, CanvasControlLayerView, el);\n      }\n    }\n  }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/canvas/control-view.js\n// module id = 667\n// module chunks = 3","'use strict';\n\nvar ScreenLayerControlView = require('./../control-view');\nmodule.exports = ScreenLayerControlView.types.img = ScreenLayerControlView.extend({\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/img/control-view.js\n// module id = 679\n// module chunks = 3","'use strict';\nvar View = require('./control-view');\n\nvar LayerControlView = require('./control-view');\nrequire('./canvas/control-view');\nrequire('./svg/control-view');\nrequire('./img/control-view');\nrequire('./video/control-view');\nrequire('./txt/control-view');\n\nvar LayersView = View.extend({\n  commands: {\n    'click [name=\"add-layer\"]': 'addLayer _addLayer'\n  },\n\n  events:{\n    'focus [data-hook=\"layer-type\"]': '_suggestLayerType'\n  },\n\n  _suggestLayerType: function() {\n    var helper = this.parent.suggestionHelper;\n    var el = this.queryByHook('layer-type');\n    helper.attach(el, function(selected) {\n      el.value = selected;\n      helper.detach();\n    }).fill([\n      'default',\n      'img',\n      'SVG',\n      'canvas'\n    ]);\n  },\n\n  _addLayer: function() {\n    var typeEl = this.queryByHook('layer-type');\n    var nameEl = this.queryByHook('layer-name');\n    var type = typeEl.value;\n    var name = nameEl.value;\n    if (!type || !name) { return; }\n    return {\n      layer: {\n        name: name,\n        type: type\n      }\n    };\n  },\n\n  subviews: {\n    items: {\n      selector: '.items',\n      waitFor: 'el',\n      prepareView: function(el) {\n        return this.renderCollection(this.collection, function (opts) {\n          var type = opts.model.getType();\n          var Constructor = LayerControlView.types[type] || LayerControlView;\n          return new Constructor(opts);\n        }, el);\n      }\n    }\n  },\n\n  template: `\n    <section class=\"row layers\">\n      <header class=\"columns\">\n        <div class=\"column\">\n          <input data-hook=\"layer-name\" placeholder=\"Name\" type=\"text\"/>\n        </div>\n        <div class=\"column\">\n          <input data-hook=\"layer-type\" placeholder=\"Type\" type=\"text\"/>\n        </div>\n        <div class=\"column no-grow\">\n          <button name=\"add-layer\" class=\"vfi-plus\"></button>\n        </div>\n      </header>\n      <div class=\"items\"></div>\n    </section>\n  `\n});\nmodule.exports = LayersView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/layers-view.js\n// module id = 681\n// module chunks = 3","'use strict';\nvar assign = require('lodash.assign');\nvar ScreenLayerControlView = require('./../control-view');\nvar SVGDetailsView = require('./details-view');\n\nmodule.exports = ScreenLayerControlView.types.SVG = ScreenLayerControlView.extend({\n  template: `\n    <section class=\"svg-layer-control\">\n      <header class=\"columns\">\n        <div class=\"column no-grow gutter-right\"><button class=\"active prop-toggle\"></button></div>\n        <div class=\"column no-grow gutter-horizontal\"><button title=\"Edit layer CSS\" class=\"edit-css vfi-code\"></button></div>\n        <div class=\"column no-grow gutter-horizontal\"><button title=\"Edit SVG elements CSS\" class=\"edit-svg-css vfi-cog-alt\"></button></div>\n        <h3 class=\"column layer-name gutter-left\" data-hook=\"name\"></h3>\n        <div class=\"column no-grow text-right\"><button class=\"vfi-trash-empty remove-layer\"></button></div>\n      </header>\n\n      <div class=\"preview gutter-horizontal\"></div>\n\n      <div class=\"mappings props\"></div>\n    </section>\n  `,\n\n  events: assign(ScreenLayerControlView.prototype.events, {\n    'click .edit-svg-css': '_editSVGStyles'\n  }),\n\n  session: {\n    svgStyles: ['object', true, function() { return {}; }]\n  },\n\n  _showDetails: function () {\n    this.rootView.showDetails(new SVGDetailsView({\n      parent: this,\n      model: this.model\n    }));\n  },\n\n  _editSVGStyles: function () {\n    var view = this;\n    var id = view.model.getId();\n    var editorView = view.rootView.getEditor();\n\n    var cssStr = '';\n\n    var styles = view.model.svgStyles;\n    var selectors = Object.keys(styles);\n    selectors.forEach(function(selector) {\n      cssStr += `${ selector } {\\n  ${ styles[selector].split(';').map(s => s.trim()).join(';\\n  ').trim() }\\n}`;\n    });\n\n\n    editorView.editCode({\n      script: cssStr,\n      language: 'css',\n      title: id + ' layer styles',\n      onshoworigin: function() {\n        view.rootView.trigger('blink', 'layers.' + id);\n      },\n      autoApply: true,\n      onvalidchange: function (str) {\n        var parsed = {};\n        str.split(/([^\\{\\}]+\\{[^\\{\\}]+\\})/igm).forEach(function(match) {\n          match = match.trim();\n          if (!match) return;\n          match = match.split('{').map(s => s.split('}')[0].trim());\n          parsed[match[0]] = match[1];\n        });\n\n        view.sendCommand('propChange', {\n          path: 'layers.' + id,\n          property: 'svgStyles',\n          value: parsed\n        });\n      }\n    });\n  }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/svg/control-view.js\n// module id = 682\n// module chunks = 3","'use strict';\nvar DetailsView = require('./../details-view');\n\n\n\nvar SVGDetailsView = DetailsView.extend({\n  derived: {\n    propNames: {\n      deps: ['model'],\n      fn: function() {\n        var def = this.model.constructor.prototype._definition;\n        return Object.keys(def)\n          .filter(function(key) {\n            return [\n              'content',\n              'svgStyles',\n\n              'name',\n              'type',\n              'zIndex'\n            ].indexOf(key) < 0;\n          });\n      }\n    }\n  }\n});\n\nmodule.exports = SVGDetailsView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/svg/details-view.js\n// module id = 683\n// module chunks = 3","'use strict';\nvar LayerControlView = require('./../control-view');\nvar TxtLayerControlView = LayerControlView.types.txt = LayerControlView.extend({\n});\nmodule.exports = TxtLayerControlView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/txt/control-view.js\n// module id = 686\n// module chunks = 3","'use strict';\n\nvar ScreenLayerControlView = require('./../control-view');\nmodule.exports = ScreenLayerControlView.types.video = ScreenLayerControlView.extend({\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/video/control-view.js\n// module id = 688\n// module chunks = 3","'use strict';\nvar Collection = require('ampersand-collection');\nvar State = require('ampersand-state');\nvar View = require('./../controller/control-view');\nvar uniq = require('lodash.uniq');\n\nfunction filterEmpty(v) { return !!v; }\n\n/**********************************************************************************\\\n *                                                                                *\n *                                                                                *\n\\**********************************************************************************/\nfunction sourceSuggestions(origin) {\n  var results = [];\n  if (!origin || typeof origin !== 'object') return results;\n\n  var kepts = [];\n  if (origin.mappable && origin.mappable.source) {\n    kepts = (origin.mappable.source || []);\n  }\n\n  function filterKeys(key) {\n    var excluded = [\n      'mappable',\n      'parent',\n      'collection',\n      origin.idAttribute,\n      origin.typeAttribute\n    ];\n    return excluded.indexOf(key) < 0 && kepts.indexOf(key) > -1;\n  }\n\n  var proto = origin.constructor && origin.constructor.prototype ? origin.constructor.prototype : {};\n  var propNames = Object.keys(proto._definition || {});\n  var derivedNames = Object.keys(proto._derived || {});\n  var childNames = Object.keys(proto._children || {});\n  var collectionNames = Object.keys(proto._collections || {});\n\n  propNames.concat(derivedNames, childNames)\n    .filter(filterKeys)\n    .forEach(function(key) {\n      var sub = sourceSuggestions(origin[key]);\n      if (!sub.length) {\n        if (childNames.indexOf(key) < 0) {\n          results.push(key);\n        }\n        return;\n      }\n\n      results = results.concat(sub.map(function(name) {\n        return key + '.' + name;\n      }));\n    });\n\n  kepts.concat(collectionNames)\n    .filter(filterKeys)\n    .forEach(function(collectionName) {\n      if (!origin[collectionName] || typeof origin[collectionName].forEach !== 'function') return;\n\n      origin[collectionName].forEach(function(model) {\n        var id = model.getId();\n        var suggestions = sourceSuggestions(model);\n        results = results.concat(suggestions.filter(filterEmpty).map(function(name) {\n          return collectionName + '.' + id + '.' + name;\n        }));\n      });\n    });\n\n  return uniq(results);\n}\n\n\n/**********************************************************************************\\\n *                                                                                *\n *                                                                                *\n\\**********************************************************************************/\nfunction targetSuggestions(origin) {\n  var results = [];\n  if (!origin || typeof origin !== 'object') return results;\n  var kepts = [];\n  if (origin.mappable && origin.mappable.target) {\n    kepts = (origin.mappable.target || []);\n  }\n\n  function filterKeys(key) {\n    var excluded = [\n      'mappable',\n      'parent',\n      'collection',\n      origin.idAttribute,\n      origin.typeAttribute\n    ];\n    return excluded.indexOf(key) < 0 && kepts.indexOf(key) > -1;\n  }\n\n  var proto = origin.constructor && origin.constructor.prototype ? origin.constructor.prototype : {};\n  var propNames = Object.keys(proto._definition || {});\n  var childNames = Object.keys(proto._children || {});\n  var collectionNames = Object.keys(proto._collections || {});\n\n  propNames.concat(childNames)\n    .filter(filterKeys)\n    .forEach(function(key) {\n      var sub = targetSuggestions(origin[key]);\n      if (!sub.length) {\n        if (childNames.indexOf(key) < 0) {\n          results.push(key);\n        }\n        return;\n      }\n\n      results = results.concat(sub.map(function(name) {\n        return key + '.' + name;\n      }));\n    });\n\n  kepts.concat(collectionNames)\n    .filter(filterKeys)\n    .forEach(function(collectionName) {\n      if (!origin[collectionName] || typeof origin[collectionName].forEach !== 'function') return;\n\n      origin[collectionName].forEach(function(model) {\n        var id = model.getId();\n        var suggestions = targetSuggestions(model);\n        results = results.concat(suggestions.filter(filterEmpty).map(function(name) {\n          return collectionName + '.' + id + '.' + name;\n        }));\n      });\n    });\n\n  return uniq(results);\n}\n\n\n/**********************************************************************************\\\n *                                                                                *\n *                                                                                *\n\\**********************************************************************************/\nvar EmitterTargetView = View.extend({\n  template: `<div class=\"mapping-emitter-target-view columns\">\n  <div class=\"column\"><input type=\"text\" name=\"target-path\" /></div>\n  <div class=\"column no-grow\"><button name=\"remove-target\" class=\"vfi-trash-empty\"></button></div>\n</div>`,\n\n  bindings: {\n    'model.path': {\n      type: 'value',\n      selector: '[name=\"target-path\"]'\n    }\n  },\n\n  events: {\n    'focus [name=\"target-path\"]': '_handleTargetPathFocus',\n    'change [name=\"target-path\"]': '_handleTargetPathChange',\n    'click [name=\"remove-target\"]': '_handleRemoveTarget'\n  },\n\n  _handleTargetPathFocus: function(evt) {\n    var targetView = this;\n    var rootView = targetView.rootView;\n    var suggestions = targetSuggestions({layers: rootView.model.layers, signals: rootView.signals, mappable: {target: ['layers', 'signals']}});\n    var index = targetView.collection.indexOf(targetView.model);\n    var mapping = targetView.parent.model;\n    rootView.suggestionHelper.attach(evt.target, function(selected) {\n      mapping.targets[index] = selected;\n      targetView.parent.updateWorkerMapping();\n      rootView.suggestionHelper.detach();\n    }).fill(suggestions);\n  },\n\n  _handleTargetPathChange: function(evt) {\n    this.model.path = evt.target.value;\n    this.parent.updateWorkerMapping();\n  },\n\n  _handleRemoveTarget: function() {\n    this.collection.remove(this.model);\n    this.parent.updateWorkerMapping();\n  }\n});\n\n\n/**********************************************************************************\\\n *                                                                                *\n *                                                                                *\n\\**********************************************************************************/\nvar EmitterView = View.extend({\n  initialize: function() {\n    this.listenToAndRun(this.model, 'change:targets', function() {\n      this.targets.reset((this.model.targets || []).map(function(path) {\n        return {path: path};\n      }));\n    });\n  },\n\n  collections: {\n    targets: Collection.extend({\n      model: State.extend({\n        props: {\n          path: 'string'\n        }\n      })\n    })\n  },\n\n  template: `<section class=\"mapping-emitter-view\">\n  <header class=\"columns\">\n    <div class=\"column emitter-name gutter\"></div>\n    <div class=\"column no-grow\"><button name=\"edit-transform-function\" class=\"vfi-code\"></button></div>\n    <div class=\"column\"><input type=\"text\" name=\"emitter-source\" /></div>\n    <div class=\"column no-grow\"><button name=\"remove-emitter\" class=\"vfi-trash-empty\"></button></div>\n  </header>\n  <div class=\"columns\">\n    <div class=\"column\"><input type=\"text\" name=\"new-emitter-target\" placeholder=\"new target path\" /></div>\n    <div class=\"column no-grow\"><button name=\"add-emitter-target\" class=\"vfi-plus\"></button></div>\n  </div>\n  <div class=\"items\"></div>\n</section>`,\n\n  bindings: {\n    'model.name': '.emitter-name',\n    'model.source': {\n      type: 'value',\n      selector: '[name=\"emitter-source\"]'\n    }\n  },\n\n  events: {\n    'click [name=\"remove-emitter\"]': '_handleRemoveEmitter',\n    'focus [name=\"new-emitter-target\"]': '_handleEmitterTargetPathFocus',\n    'click [name=\"add-emitter-target\"]': '_handleAddEmitterTarget',\n    'click [name=\"edit-transform-function\"]': '_handleEditEmitterTransform'\n  },\n\n  _handleRemoveEmitter: function() {\n    this.rootView.sendCommand('removeMapping', {name: this.model.getId()});\n  },\n\n  updateWorkerMapping: function(serialized) {\n    if (!serialized) {\n      serialized = this.model.serialize();\n      serialized.targets = this.targets.serialize().map(function(obj) { return obj.path; });\n    }\n    this.rootView.sendCommand('updateMapping', {mapping: serialized});\n  },\n\n  _handleEmitterTargetPathFocus: function(evt) {\n    var view = this;\n    var rootView = view.rootView;\n    var suggestions = targetSuggestions({layers: rootView.model.layers, signals: rootView.signals, mappable: {target: ['layers', 'signals']}});\n\n    rootView.suggestionHelper.attach(evt.target, function(selected) {\n      evt.target.value = selected;\n      view._handleAddEmitterTarget();\n      rootView.suggestionHelper.detach();\n    }).fill(suggestions);\n  },\n\n  _handleAddEmitterTarget: function() {\n    var el = this.query('[name=\"new-emitter-target\"]');\n    if (this.model.targets.indexOf(el.value) < 0) {\n      this.targets.add({path: el.value});\n      this.updateWorkerMapping();\n    }\n    el.value = '';\n  },\n\n  _handleEditEmitterTransform: function() {\n    var mappingView = this;\n    var rootView = this.rootView;\n    var editor = rootView.getEditor();\n    var model = this.model;\n    editor.editCode({\n      script: (model.transformFunction || function(val) { return val; }).toString(),\n      autoApply: true,\n      language: 'javascript',\n      onvalidchange: function doneEditingTransformFunction(str) {\n        var mapping = model.serialize();\n        mapping.transformFunction = str;\n        mappingView.updateWorkerMapping(mapping);\n      }\n    });\n  },\n\n  subviews: {\n    mappingsList: {\n      waitFor: 'targets',\n      selector: '.items',\n      prepareView: function(el) {\n        return this.renderCollection(this.targets, EmitterTargetView, el);\n      }\n    }\n  },\n\n  derived: {\n    codeEditor: {\n      deps: ['rootView'],\n      fn: function () {\n        return this.rootView.codeEditor;\n      }\n    }\n  }\n});\n\n\n/**********************************************************************************\\\n *                                                                                *\n *                                                                                *\n\\**********************************************************************************/\nvar MappingsControlView = View.extend({\n  template: `<section class=\"mappings-view\">\n  <header>\n    <div class=\"add-form columns\">\n      <div class=\"column add-form--name\">\n        <input placeholder=\"new mapping name\" name=\"new-source-name\" />\n      </div>\n\n      <div class=\"column add-form--source-path\">\n        <input placeholder=\"new source event\" name=\"new-source-path\" />\n      </div>\n\n      <div class=\"column no-grow\">\n        <button name=\"add-mapping\" class=\"vfi-plus\"></button>\n      </div>\n    </div>\n  </header>\n\n  <div class=\"items\"></div>\n</section>`,\n\n  events: {\n    'focus [name=new-source-path]': '_handleSourceFocus',\n  },\n\n  _handleSourceFocus: function(evt) {\n    var rootView = this.rootView;\n    var helper = rootView.suggestionHelper;\n    var midiSources = this.rootView.midiSources();\n\n    var results = [];\n    rootView.signals.forEach(function(model) {\n      var id = model.getId();\n      results = results.concat(sourceSuggestions(model).filter(filterEmpty).map(function(name) {\n        return 'signals.' + id + '.' + name;\n      }));\n    });\n\n    results = midiSources.concat(results);\n\n    helper.attach(evt.target, function(selected) {\n      evt.target.value = selected;\n      helper.detach();\n    }).fill(results);\n  },\n\n  commands:{\n    'click [name=\"add-mapping\"]': 'addMapping _handleAddMapping'\n  },\n\n  _handleAddMapping: function() {\n    return {\n      mapping: {\n        name: this.query('[name=\"new-source-name\"]').value,\n        source: this.query('[name=\"new-source-path\"]').value\n      }\n    };\n  },\n\n\n  derived: {\n    suggestionHelper: {\n      deps: ['rootView'],\n      fn: function () {\n        return this.rootView.suggestionHelper;\n      }\n    }\n  },\n\n  render: function() {\n    View.prototype.render.apply(this, arguments);\n    this.mappingsList = this.renderCollection(this.collection, EmitterView, this.query('.items'));\n    return this;\n  }\n});\n\nmodule.exports = MappingsControlView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./mapping/control-view.js\n// module id = 690\n// module chunks = 3","'use strict';\n\nfunction toPrct(val) {\n  return (100 / 127) * (val || 0);\n}\n\nvar mappings = {\n  prefix: '<something>',\n\n  type: {\n    128: 'noteOn',\n    144: 'noteOff',\n    176: 'change',\n    192: 'search',\n    248: 'idle'\n  },\n\n  note: {\n    1: 'k1',\n    2: 'k2',\n    3: 'k3',\n    4: 'k4',\n    5: 'k5',\n    6: 'k6',\n    7: 'k7',\n    8: 'k8',\n\n    36: 'p1',\n    38: 'p2',\n    40: 'p3',\n    41: 'p4',\n    43: 'p5',\n    45: 'p6',\n    47: 'p7',\n    48: 'p8',\n  },\n\n  velocity: {\n    0: function(type, note, velocity) {\n      if (note > 23) {\n        return false;\n      }\n      return velocity;\n    },\n\n    127: function(type, note, velocity) {\n      if (note > 23) {\n        return true;\n      }\n      return toPrct(velocity);\n    }\n  }\n};\n\nmodule.exports = function(data) {\n  var type = data[0] || 0;\n  if (type === 248) { return {}; }\n\n  var note = data[1] || 0;\n  var velocity = data[2] || 0;\n\n  var name = mappings.note[note];\n  console.info('MIDI evt on %s (%s) => %s', name, note, velocity, data);\n  return {\n    name: name,\n    velocity: velocity,\n    type: type\n  };\n};\nmodule.exports.note = mappings.note;\nmodule.exports.prefix = mappings.prefix;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./midi/devices/akai/lpd8.js\n// module id = 691\n// module chunks = 3","'use strict';\n\nfunction toPrct(val) {\n  return (100 / 127) * (val || 0);\n}\n\nvar KP3ToggleButoons = [\n  49,\n  50,\n  51,\n  52,\n  53,\n  54,\n  55,\n  56,\n\n  92,\n  95\n];\n\nvar KP3LetterButoons = [\n  36,\n  37,\n  38,\n  39\n];\n\nvar mappings = {\n  prefix: 'kp3',\n\n  type: {\n    128: 'noteOn',\n    144: 'noteOff',\n    176: 'change',\n    192: 'search',\n    248: 'idle'\n  },\n\n  note: {\n    36: 'buttonA',\n    37: 'buttonB',\n    38: 'buttonC',\n    39: 'buttonD',\n\n    49: 'num1',\n    50: 'num2',\n    51: 'num3',\n    52: 'num4',\n    53: 'num5',\n    54: 'num6',\n    55: 'num7',\n    56: 'num8',\n\n    70: 'padX',\n    71: 'padY',\n    72: 'pad72',\n    73: 'pad73',\n    74: 'pad74',\n    75: 'pad75',\n    76: 'pad76',\n\n    92: 'pad',\n    93: 'effectSlider',\n    94: 'effectKnob',\n    95: 'hold'\n  },\n\n  velocity: {\n    0: function(type, note, velocity) {\n      if (KP3ToggleButoons.indexOf(note) > -1) {\n        return false;\n      }\n      return velocity;\n    },\n\n    64: function(type, note, velocity) {\n      if (KP3LetterButoons.indexOf(note) > -1) {\n        return false;\n      }\n      return toPrct(velocity);\n    },\n\n    100: function(type, note, velocity) {\n      if (KP3LetterButoons.indexOf(note) > -1) {\n        return true;\n      }\n      return toPrct(velocity);\n    },\n\n    127: function(type, note, velocity) {\n      if (KP3ToggleButoons.indexOf(note) > -1) {\n        return true;\n      }\n      return toPrct(velocity);\n    }\n  },\n\n  signalNames: [\n    'buttonA:noteOn',\n    'buttonA:noteOff',\n    'buttonB:noteOn',\n    'buttonB:noteOff',\n    'buttonC:noteOn',\n    'buttonC:noteOff',\n    'buttonD:noteOn',\n    'buttonD:noteOff',\n\n    'num1:noteOn',\n    'num1:noteOff',\n    'num2:noteOn',\n    'num2:noteOff',\n    'num3:noteOn',\n    'num3:noteOff',\n    'num4:noteOn',\n    'num4:noteOff',\n    'num5:noteOn',\n    'num5:noteOff',\n    'num6:noteOn',\n    'num6:noteOff',\n    'num7:noteOn',\n    'num7:noteOff',\n    'num8:noteOn',\n    'num8:noteOff',\n\n    'pad:noteOn',\n    'pad:noteOff',\n\n    'padX:change',\n    'padY:change',\n    'pad72:change',\n    'pad73:change',\n    'pad74:change',\n    'pad75:change',\n    'pad76:change',\n\n    'effectKnob:change',\n    'effectSlider:change'\n  ]\n};\n\nfunction _result(note, data) {\n  // that sucks! KP3\n  if (data[0] === 192) {\n    return 'bpmKnob';\n  }\n\n  var val = mappings.note[''+note];\n\n  if (typeof val === 'function') {\n    return val(data[0], data[1], data[2]);\n  }\n\n  return val;\n}\n\nmodule.exports = function(data) {\n  var type = data[0] || 0;\n  if (type === 248) { return {}; }\n\n  var note = data[1] || 0;\n  var velocity = data[2] || 0;\n\n  var name = _result(note, data);\n  if (name === 'bpmKnob') {\n    velocity = note;\n  }\n  return {\n    name: name,\n    velocity: velocity,\n    type: type\n  };\n};\nmodule.exports.note = mappings.note;\nmodule.exports.prefix = mappings.prefix;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./midi/devices/korg/kp3.js\n// module id = 692\n// module chunks = 3","'use strict';\n\nfunction toPrct(val) {\n  return (100 / 127) * (val || 0);\n}\n\nvar mappings = {\n  prefix: 'nk2',\n\n  type: {\n    128: 'noteOn',\n    144: 'noteOff',\n    176: 'change',\n    192: 'search',\n    248: 'idle'\n  },\n\n  note: {\n    0: 'slider1',\n    1: 'slider2',\n    2: 'slider3',\n    3: 'slider4',\n    4: 'slider5',\n    5: 'slider6',\n    6: 'slider7',\n    7: 'slider8',\n\n    16: 'knob1',\n    17: 'knob2',\n    18: 'knob3',\n    19: 'knob4',\n    20: 'knob5',\n    21: 'knob6',\n    22: 'knob7',\n    23: 'knob8',\n\n    32: 's1',\n    33: 's2',\n    34: 's3',\n    35: 's4',\n    36: 's5',\n    37: 's6',\n    38: 's7',\n    39: 's8',\n\n    41: 'play',\n    42: 'stop',\n    43: 'rewind',\n    44: 'forward',\n    45: 'record',\n    46: 'cycle',\n\n    48: 'm1',\n    49: 'm2',\n    50: 'm3',\n    51: 'm4',\n    52: 'm5',\n    53: 'm6',\n    54: 'm7',\n    55: 'm8',\n\n    58: 'trackprevious',\n    59: 'tracknext',\n    60: 'markerset',\n    61: 'markerprevious',\n    62: 'markernext',\n\n    64: 'r1',\n    65: 'r2',\n    66: 'r3',\n    67: 'r4',\n    68: 'r5',\n    69: 'r6',\n    70: 'r7',\n    71: 'r8'\n  },\n\n  velocity: {\n    0: function(type, note, velocity) {\n      if (note > 23) {\n        return false;\n      }\n      return velocity;\n    },\n\n    127: function(type, note, velocity) {\n      if (note > 23) {\n        return true;\n      }\n      return toPrct(velocity);\n    }\n  }\n};\n\nmodule.exports = function(data) {\n  var type = data[0] || 0;\n  if (type === 248) { return {}; }\n\n  var note = data[1] || 0;\n  var velocity = data[2] || 0;\n\n  var name = mappings.note[note];\n  // console.info('nk2 MIDI evt on %s (%s) => %s', name, note, velocity, type);\n  return {\n    name: name,\n    velocity: velocity,\n    type: type\n  };\n};\nmodule.exports.note = mappings.note;\nmodule.exports.prefix = mappings.prefix;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./midi/devices/korg/nk2.js\n// module id = 693\n// module chunks = 3","/* global module, console */\n'use strict';\n\nfunction toPrct(val) {\n  return (100 / 127) * (val || 0);\n}\n\nvar mappings = {\n  prefix: '<something>',\n\n  type: {\n    128: 'noteOn',\n    144: 'noteOff',\n    176: 'change',\n    192: 'search',\n    248: 'idle'\n  },\n\n  note: {\n    0: 'pA1',\n    1: 'pA2',\n    2: 'pA3',\n    3: 'pA4',\n    4: 'pA5',\n    5: 'pA6',\n    6: 'pA7',\n    7: 'pA8',\n\n    16: 'pB1',\n    17: 'pB2',\n    18: 'pB3',\n    19: 'pB4',\n    20: 'pB5',\n    21: 'pB6',\n    22: 'pB7',\n    23: 'pB8',\n\n    32: 'pC1',\n    33: 'pC2',\n    34: 'pC3',\n    35: 'pC4',\n    36: 'pC5',\n    37: 'pC6',\n    38: 'pC7',\n    39: 'pC8',\n\n    48: 'pD1',\n    49: 'pD2',\n    50: 'pD3',\n    51: 'pD4',\n    52: 'pD5',\n    53: 'pD6',\n    54: 'pD7',\n    55: 'pD8',\n\n    64: 'pE1',\n    65: 'pE2',\n    66: 'pE3',\n    67: 'pE4',\n    68: 'pE5',\n    69: 'pE6',\n    70: 'pE7',\n    71: 'pE8',\n\n    80: 'pF1',\n    81: 'pF2',\n    82: 'pF3',\n    83: 'pF4',\n    84: 'pF5',\n    85: 'pF6',\n    86: 'pF7',\n    87: 'pF8',\n\n    96: 'pI1',\n    97: 'pI2',\n    98: 'pI3',\n    99: 'pI4',\n    100: 'pI5',\n    101: 'pI6',\n    102: 'pI7',\n    103: 'pI8',\n\n    112: 'pJ1',\n    113: 'pJ2',\n    114: 'pJ3',\n    115: 'pJ4',\n    116: 'pJ5',\n    117: 'pJ6',\n    118: 'pJ7',\n    119: 'pJ8',\n  },\n\n  velocity: {\n    0: function(type, note, velocity) {\n      if (note > 23) {\n        return false;\n      }\n      return velocity;\n    },\n\n    127: function(type, note, velocity) {\n      if (note > 23) {\n        return true;\n      }\n      return toPrct(velocity);\n    }\n  },\n\n  signalNames: [\n  ]\n};\n\nmodule.exports = function(data) {\n  var type = data[0] || 0;\n  if (type === 248) { return {}; }\n\n  var note = data[1] || 0;\n  var velocity = data[2] || 0;\n\n  var name = mappings.note[note];\n  return {\n    name: name,\n    velocity: velocity,\n    type: type\n  };\n};\nmodule.exports.note = mappings.note;\nmodule.exports.prefix = mappings.prefix;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./midi/devices/novation/lpm.js\n// module id = 694\n// module chunks = 3","'use strict';\nvar SignalState = require('./../state');\n\nvar BeatState = SignalState.types.beat = SignalState.extend({\n  initialize: function() {\n    SignalState.prototype.initialize.apply(this, arguments);\n    this.listenTo(this.collection, 'frametime', function(frametime) {\n      this.frametime = frametime;\n    });\n  },\n\n  session: {\n    frametime: ['number', true, 0]\n  },\n\n  mappable: {\n    source: ['result', 'timeBetweenBeats', 'beatNum'],\n    target: ['input']\n  },\n\n  derived: {\n    result: {\n      deps: ['timeBetweenBeats', 'frametime'],\n      fn: function() {\n        return this.computeSignal();\n      }\n    },\n    beatNum: {\n      deps: ['timeBetweenBeats', 'frametime'],\n      fn: function() {\n        return this.frametime ? Math.floor(this.frametime / this.timeBetweenBeats) : 0;\n      }\n    },\n    timeBetweenBeats: {\n      deps: ['input'],\n      fn: function() {\n        return (60 * 1000) / Math.max(this.input, 1);\n      }\n    }\n  },\n\n  computeSignal: function() {\n    var ft = this.frametime;\n    var tbb = this.timeBetweenBeats;\n    return !ft ? 0 : (100 - (((ft % tbb) / tbb) * 100));\n  }\n});\n\nmodule.exports = BeatState;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./signal/beat/state.js\n// module id = 695\n// module chunks = 3","'use strict';\nvar assign = require('lodash.assign');\nvar DetailsView = require('./../controller/details-view');\nvar SignalDetailsView = DetailsView.extend({\n  derived: {\n    modelPath: {\n      deps: [],\n      fn: function() {\n        return 'signals.' + this.model.getId();\n      }\n    }\n  },\n\n  bindings: assign({\n    'model.name': '[data-hook=name]'\n  }, DetailsView.prototype.bindings)\n});\nmodule.exports = SignalDetailsView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./signal/details-view.js\n// module id = 696\n// module chunks = 3","'use strict';\nvar SignalState = require('./../state');\n\nvar _360 = {\n  type: 'number',\n  required: true,\n  default: 180,\n  min: 0,\n  max: 360\n};\nvar _100 = {\n  type: 'number',\n  required: true,\n  default: 100,\n  min: 0,\n  max: 100\n};\n\nvar HSLASignalState = SignalState.types.hsla = SignalState.extend({\n  props: {\n    hue: _360,\n    saturation: _100,\n    lightness: _100,\n    alpha: _100\n  },\n\n  mappable: {\n    source: ['result', 'hue', 'saturation', 'lightness', 'alpha'],\n    target: ['hue', 'saturation', 'lightness', 'alpha']\n  },\n\n  derived: {\n    result: {\n      deps: ['hue', 'saturation', 'lightness', 'alpha'],\n      fn: function() {\n        return this.computeSignal();\n      }\n    }\n  },\n  // parseInput: function() {\n  //   var values = _colorValues(this.input);\n  //   return {\n  //     hue: values[0],\n  //     saturation: values[1],\n  //     lightness: values[2],\n  //     alpha: values[3]\n  //   };\n  // },\n  computeSignal: function() {\n    return 'hsla(' + Math.round(this.hue) + ',' + Math.round(this.saturation) + '%,' + Math.round(this.lightness) + '%,' + (Math.round(this.alpha) / 100) + ')';\n  }\n});\n\nmodule.exports = HSLASignalState;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./signal/hsla/state.js\n// module id = 697\n// module chunks = 3","'use strict';\nvar SignalState = require('./../state');\nvar _255 = {\n  type: 'number',\n  required: true,\n  default: 180,\n  min: 0,\n  max: 255\n};\nvar _100 = {\n  type: 'number',\n  required: true,\n  default: 100,\n  min: 0,\n  max: 100\n};\nvar RGBASignalState = SignalState.types.rgba = SignalState.extend({\n  props: {\n    red: _255,\n    green: _255,\n    blue: _255,\n    alpha: _100\n  },\n\n  mappable: {\n    source: ['result', 'red', 'green', 'blue', 'alpha'],\n    target: ['red', 'green', 'blue', 'alpha']\n  },\n\n  derived: {\n    result: {\n      deps: ['red', 'green', 'blue', 'alpha'],\n      fn: function() {\n        return this.computeSignal();\n      }\n    }\n  },\n  // parseInput: function() {\n  //   var values = _colorValues(this.input);\n  //   return {\n  //     red: values[0],\n  //     green: values[1],\n  //     blue: values[2],\n  //     alpha: values[3]\n  //   };\n  // },\n  computeSignal: function() {\n    return 'rgba(' + Math.round(this.red) + ',' + Math.round(this.green) + ',' + Math.round(this.blue) + ',' + (Math.round(this.alpha) / 100) + ')';\n  }\n});\nmodule.exports = RGBASignalState;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./signal/rgba/state.js\n// module id = 698\n// module chunks = 3","'use strict';\nvar View = require('./../controller/control-view');\n\nvar SignalControlView = require('./control-view');\nrequire('./beat/control-view');\nrequire('./hsla/control-view');\nrequire('./rgba/control-view');\n\nvar SignalsView = View.extend({\n  commands: {\n    'click [name=\"add-signal\"]': 'addSignal _addSignal'\n  },\n  events:{\n    'focus [data-hook=\"signal-type\"]': '_suggestSignalType'\n  },\n\n  _suggestSignalType: function() {\n    var helper = this.parent.suggestionHelper;\n    var el = this.queryByHook('signal-type');\n    helper.attach(this.queryByHook('signal-type'), function(selected) {\n      el.value = selected;\n      helper.detach();\n    }).fill([\n      'default',\n      'beat',\n      'hsla',\n      'rgba'\n    ]);\n  },\n\n  _addSignal: function() {\n    var typeEl = this.queryByHook('signal-type');\n    var nameEl = this.queryByHook('signal-name');\n    var type = typeEl.value;\n    var name = nameEl.value;\n    return {\n      signal: {\n        type: type,\n        name: name\n      }\n    };\n  },\n\n  subviews: {\n    items: {\n      selector: '.items',\n      waitFor: 'el',\n      prepareView: function(el) {\n        return this.renderCollection(this.collection, function (opts) {\n          var type = opts.model.getType();\n          var Constructor = SignalControlView.types[type] || SignalControlView;\n          return new Constructor(opts);\n        }, el);\n      }\n    }\n  },\n\n  template: `\n    <section class=\"row signals\">\n      <header class=\"columns\">\n        <div class=\"column\">\n          <input data-hook=\"signal-name\" placeholder=\"Name\" type=\"text\"/>\n        </div>\n        <div class=\"column\">\n          <input data-hook=\"signal-type\" placeholder=\"Type\" type=\"text\"/>\n        </div>\n        <div class=\"column no-grow\">\n          <button name=\"add-signal\" class=\"vfi-plus\"></button>\n        </div>\n      </header>\n      <div class=\"items\"></div>\n    </section>\n  `\n});\nmodule.exports = SignalsView;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./signal/signals-view.js\n// module id = 699\n// module chunks = 3"],"sourceRoot":""}