{"version":3,"sources":["webpack:///./screen/state.js","webpack:///./layer/collection.js"],"names":[],"mappings":";;;;;;AAAA;AACA;;AAEA;AACA;AACA,+CAA+C;AAC/C;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA,wCAAwC;AACxC;AACA;AACA;AACA,MAAM,EAAE;AACR;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;;;;;;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC,E","file":"4.worker-build.js","sourcesContent":["'use strict';\n/* global Uint8Array*/\n\nvar State = require('ampersand-state');\nvar ScreenState = State.extend({\n  initialize: function(attributes, options = {}) {\n    this._isControllerState = !!options.router;\n  },\n\n  mappable: {\n    source: ['frametime', 'midi', 'firstframetime', 'signals'],\n    target: ['layers', 'signals']\n  },\n\n  session: {\n    audio: ['object', true, function() { return {\n      bufferLength: 128,\n      frequency: new Uint8Array(128),\n      timeDomain: new Uint8Array(128)\n    }; }],\n    frametime: ['number', true, 0],\n    firstframetime: ['any', true, function () {\n      return performance.now();\n    }],\n    latency: ['number', true, 0]\n  },\n\n  collections: {\n    layers: require('./../layer/collection')\n  },\n\n  derived: {\n    hasDOM: {\n      deps: [],\n      fn: function() {\n        return typeof DedicatedWorkerGlobalScope === 'undefined';\n      }\n    },\n    isControllerState: {\n      deps: [],\n      fn: function() {\n        return this._isControllerState;\n      }\n    },\n    location: {\n      deps: ['hasDOM', 'isControllerState'],\n      fn: function() {\n        return this.isControllerState ? 'control' : (this.hasDOM ? 'screen' : 'worker');\n      }\n    }\n  },\n\n  _log: function(...args) {\n    var color = this.location === 'screen' ? 'lightblue' : (this.location === 'control' ? 'lightgreen' : 'pink');\n    var txt = args.shift();\n    console.log('%c'+ this.location[0].toUpperCase() + ': ' + txt, 'color:' + color, ...args);\n  },\n\n  toJSON: function() {\n    var obj = State.prototype.toJSON.apply(this, arguments);\n    delete obj.audio;\n    return obj;\n  }\n});\n\nmodule.exports = ScreenState;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./screen/state.js\n// module id = 2\n// module chunks = 4","'use strict';\nvar assign = require('lodash.assign');\nvar Collection = require('ampersand-collection');\nvar LayerState = require('./state');\nrequire('./canvas/state');\nrequire('./video/state');\nrequire('./svg/state');\nrequire('./img/state');\nrequire('./txt/state');\n\nmodule.exports = Collection.extend({\n  comparator: 'zIndex',\n  mainIndex: 'name',\n  model: function(attrs, opts) {\n    var Constructor = LayerState.types[attrs.type] || LayerState;\n    var state = new Constructor(attrs, opts);\n    // state.on('change', function() {\n    //   opts.collection.trigger('change:layer', state);\n    // });\n    return state;\n  },\n\n  toJSON: function () {\n    return this.map(function (model) {\n      if (model.toJSON) {\n        return model.toJSON();\n      }\n      else {\n        var out = {};\n        assign(out, model);\n        delete out.collection;\n        return out;\n      }\n    });\n  }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./layer/collection.js\n// module id = 567\n// module chunks = 4"],"sourceRoot":""}